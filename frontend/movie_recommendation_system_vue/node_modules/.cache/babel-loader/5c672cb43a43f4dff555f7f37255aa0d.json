{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5077111a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"movie-strip-slot\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"time\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"pagination-style-first\"\n};\nconst _hoisted_4 = {\n  key: 2,\n  class: \"pagination-style-second\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_skeleton = _resolveComponent(\"el-skeleton\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_el_rate = _resolveComponent(\"el-rate\");\n  const _component_movie_strip = _resolveComponent(\"movie-strip\");\n  const _component_blank_page = _resolveComponent(\"blank-page\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_skeleton, {\n    loading: $setup.loading,\n    rows: 5,\n    animated: \"\"\n  }, null, 8 /* PROPS */, [\"loading\"]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.reviewedMovies, (movie, index) => {\n    return _openBlock(), _createBlock(_component_movie_strip, {\n      key: index,\n      movie: movie,\n      style: {\n        \"margin-bottom\": \"1rem\"\n      }\n    }, {\n      footer: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [movie.time ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(movie.time) + \" 看过 \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_divider, {\n        direction: \"vertical\"\n      }), _createVNode(_component_el_rate, {\n        modelValue: movie.userScore,\n        \"onUpdate:modelValue\": $event => movie.userScore = $event,\n        disabled: \"\",\n        size: \"small\",\n        texts: ['很差', '较差', '还行', '推荐', '力荐'],\n        colors: ['#777777', '#777777', '#777777'],\n        \"show-text\": \"\",\n        \"text-color\": \"#777777\",\n        \"disabled-void-color\": \"rgb(226, 226, 226)\"\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\"])])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"movie\"]);\n  }), 128 /* KEYED_FRAGMENT */)), !$setup.loading && !$setup.reviewedMovies.length ? (_openBlock(), _createBlock(_component_blank_page, {\n    key: 0,\n    \"page-name\": 'record'\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 分页 样式1\"), $setup.total > 10 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_el_pagination, {\n    style: {\n      \"justify-content\": \"center\"\n    },\n    currentPage: $setup.currentPage,\n    \"onUpdate:currentPage\": _cache[0] || (_cache[0] = $event => $setup.currentPage = $event),\n    \"page-size\": $setup.pageSize,\n    \"onUpdate:page-size\": _cache[1] || (_cache[1] = $event => $setup.pageSize = $event),\n    total: $setup.total,\n    \"onUpdate:total\": _cache[2] || (_cache[2] = $event => $setup.total = $event),\n    \"pager-count\": \"7\",\n    background: \"\",\n    layout: \"total, prev, pager, next, jumper\"\n  }, null, 8 /* PROPS */, [\"currentPage\", \"page-size\", \"total\"])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 分页 样式2 \"), $setup.total > 10 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_el_pagination, {\n    style: {\n      \"justify-content\": \"center\"\n    },\n    currentPage: $setup.currentPage,\n    \"onUpdate:currentPage\": _cache[3] || (_cache[3] = $event => $setup.currentPage = $event),\n    \"page-size\": $setup.pageSize,\n    \"onUpdate:page-size\": _cache[4] || (_cache[4] = $event => $setup.pageSize = $event),\n    total: $setup.total,\n    \"onUpdate:total\": _cache[5] || (_cache[5] = $event => $setup.total = $event),\n    \"pager-count\": \"5\",\n    small: \"\",\n    background: \"\",\n    layout: \"prev, pager, next, jumper\"\n  }, null, 8 /* PROPS */, [\"currentPage\", \"page-size\", \"total\"])])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;EAMaA,KAAK,EAAC;AAAkB;;;EACHA,KAAK,EAAC;;;;EAsBfA,KAAK,EAAC;;;;EAaNA,KAAK,EAAC;;;;;;;;;6DAzC7BC,aAAoDC;IAAtCC,OAAO,EAAEC,cAAO;IAAGC,IAAI,EAAE,CAAC;IAAEC,QAAQ,EAAR;2DAE1CC,oBAqBWC,6BArBwBJ,qBAAc,GAA/BK,KAAK,EAAEC,KAAK;yBAC5BC,aAmBcC;WApByCF,KAAK;MAC9CD,KAAK,EAAEA,KAAK;MAAEI,KAA4B,EAA5B;QAAA;MAAA;;MACTC,MAAM,WACrB,MAeM,CAfNC,oBAeM,OAfNC,UAeM,GAdQP,KAAK,CAACQ,IAAI,kBAAtBV,oBAEO,QAFPW,UAEO,mBADFT,KAAK,CAACQ,IAAI,IAAG,MAClB,sDACAhB,aAAkCkB;QAAtBC,SAAS,EAAC;MAAU,IAChCnB,aASEoB;oBARWZ,KAAK,CAACa,SAAS;yCAAfb,KAAK,CAACa,SAAS;QACxBC,QAAQ,EAAR,EAAQ;QACRC,IAAI,EAAC,OAAO;QACXC,KAAK,EAAE,8BAA8B;QACrCC,MAAM,EAAE,iCAAiC;QAC1C,WAAS,EAAT,EAAS;QACT,YAAU,EAAC,SAAS;QACpB,qBAAmB,EAAC;;;;mCAObtB,cAAO,KAAKA,qBAAc,CAACuB,MAAM,kBAApDhB,aAAyFiB;;IAAlC,WAAS,EAAE;2CAElEC,8BAAc,EACHzB,YAAK,uBAAhBG,oBAUM,OAVNuB,UAUM,GATJ7B,aAQE8B;IAPElB,KAA+B,EAA/B;MAAA;IAAA,CAA+B;IACvBmB,WAAW,EAAE5B,kBAAW;gEAAXA,kBAAW;IACxB,WAAS,EAAEA,eAAQ;8DAARA,eAAQ;IACnB6B,KAAK,EAAE7B,YAAK;0DAALA,YAAK;IACpB,aAAW,EAAC,GAAG;IACf8B,UAAU,EAAV,EAAU;IACVC,MAAM,EAAC;yGAIbN,+BAAe,EACJzB,YAAK,uBAAhBG,oBAWM,OAXN6B,UAWM,GAVJnC,aASE8B;IARElB,KAA+B,EAA/B;MAAA;IAAA,CAA+B;IACvBmB,WAAW,EAAE5B,kBAAW;gEAAXA,kBAAW;IACxB,WAAS,EAAEA,eAAQ;8DAARA,eAAQ;IACnB6B,KAAK,EAAE7B,YAAK;0DAALA,YAAK;IACpB,aAAW,EAAC,GAAG;IACfiC,KAAK,EAAL,EAAK;IACLH,UAAU,EAAV,EAAU;IACVC,MAAM,EAAC","names":["class","_createVNode","_component_el_skeleton","loading","$setup","rows","animated","_createElementBlock","_Fragment","movie","index","_createBlock","_component_movie_strip","style","footer","_createElementVNode","_hoisted_1","time","_hoisted_2","_component_el_divider","direction","_component_el_rate","userScore","disabled","size","texts","colors","length","_component_blank_page","_createCommentVNode","_hoisted_3","_component_el_pagination","currentPage","total","background","layout","_hoisted_4","small"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\views\\personal\\info\\WatchedMoviesView.vue"],"sourcesContent":["<template>\r\n  <el-skeleton :loading=\"loading\" :rows=\"5\" animated/>\r\n\r\n  <template v-for=\"(movie, index) in reviewedMovies\" :key=\"index\">\r\n    <movie-strip :movie=\"movie\" style=\"margin-bottom: 1rem;\">\r\n      <template v-slot:footer>\r\n        <div class=\"movie-strip-slot\">\r\n          <span v-if=\"movie.time\" class=\"time\">\r\n            {{ movie.time }} 看过\r\n          </span>\r\n          <el-divider direction=\"vertical\"/>\r\n          <el-rate\r\n              v-model=\"movie.userScore\"\r\n              disabled\r\n              size=\"small\"\r\n              :texts=\"['很差', '较差', '还行', '推荐', '力荐']\"\r\n              :colors=\"['#777777', '#777777', '#777777']\"\r\n              show-text\r\n              text-color=\"#777777\"\r\n              disabled-void-color=\"rgb(226, 226, 226)\"\r\n          />\r\n        </div>\r\n      </template>\r\n    </movie-strip>\r\n  </template>\r\n\r\n  <blank-page v-if=\"!loading && !reviewedMovies.length\" :page-name=\"'record'\"></blank-page>\r\n\r\n  <!-- 分页 样式1-->\r\n  <div v-if=\"total > 10\" class=\"pagination-style-first\">\r\n    <el-pagination\r\n        style=\"justify-content: center\"\r\n        v-model:currentPage=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        v-model:total=\"total\"\r\n        pager-count=\"7\"\r\n        background\r\n        layout=\"total, prev, pager, next, jumper\"\r\n    />\r\n  </div>\r\n\r\n  <!-- 分页 样式2 -->\r\n  <div v-if=\"total > 10\" class=\"pagination-style-second\">\r\n    <el-pagination\r\n        style=\"justify-content: center\"\r\n        v-model:currentPage=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        v-model:total=\"total\"\r\n        pager-count=\"5\"\r\n        small\r\n        background\r\n        layout=\"prev, pager, next, jumper\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MovieStrip from \"@/components/basic/MovieStrip\";\r\nimport {ref, watch} from \"vue\";\r\nimport movieRequest from \"@/api/movie\";\r\nimport BlankPage from \"@/components/basic/BlankPage\";\r\n\r\nexport default {\r\n  name: \"WatchedMoviesView\",\r\n  components: {BlankPage, MovieStrip},\r\n  setup() {\r\n    let loading = ref(true)\r\n    let reviewedMovies = ref([])\r\n\r\n    // 分页查询需要用到的一些数据\r\n    let currentPage = ref(1); // 当前页码\r\n    let pageSize = ref(10);   // 每页电影数量\r\n    let total = ref(0);      // 总电影数\r\n\r\n    const getMoreReviewedMovies = () => {\r\n      reviewedMovies.value = [];\r\n      loading.value = true;\r\n      movieRequest.getMoreReviewedMovies(currentPage.value, pageSize.value).then(res => {\r\n        if (res.code === 200) {\r\n          reviewedMovies.value = res.data.records\r\n          for (let i = 0; i < reviewedMovies.value.length; ++i) {\r\n            reviewedMovies.value[i].userScore /= 2\r\n          }\r\n          loading.value = false;\r\n          total.value = res.data.total;\r\n        }\r\n      }).catch(err => {\r\n        console.error(err)\r\n      })\r\n    }\r\n    getMoreReviewedMovies();\r\n\r\n    /**\r\n     * 监听`当前页码`变化\r\n     * 若页码发生变化，重新请求电影数据，随后页面发生变化。\r\n     */\r\n    watch(currentPage, (newValue, oldValue) => {\r\n      // 页面回到顶部\r\n      document.body.scrollTop = 0;\r\n      document.documentElement.scrollTop = 0;\r\n      // 兼容IE\r\n      window.scrollTo(0, 0);\r\n\r\n      getMoreReviewedMovies();\r\n    });\r\n\r\n    return {\r\n      currentPage,\r\n      pageSize,\r\n      total,\r\n      loading,\r\n      reviewedMovies\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.movie-strip-slot {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  background-color: rgb(245, 245, 254);\r\n  padding: 0.3rem 0;\r\n  border-style: solid;\r\n  border-color: #b0d2e5;\r\n  border-radius: 0.5rem;\r\n  border-width: 1px;\r\n\r\n  .time {\r\n    font-size: 0.8rem;\r\n    color: #91949c;\r\n    padding-left: 0.3rem;\r\n  }\r\n}\r\n\r\n/* 分页模块样式 */\r\n.pagination-style-first, .pagination-style-second {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.pagination-style-first {\r\n  display: block;\r\n}\r\n\r\n.pagination-style-second {\r\n  display: none;\r\n}\r\n\r\n@media screen and (max-width: 1000px) {\r\n  .pagination-style-first {\r\n    display: none;\r\n  }\r\n\r\n  .pagination-style-second {\r\n    display: block;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}