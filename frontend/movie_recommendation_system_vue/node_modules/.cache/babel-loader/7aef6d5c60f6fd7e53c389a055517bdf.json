{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-003acbfc\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 1,\n  class: \"pagination-style-first\"\n};\nconst _hoisted_2 = {\n  key: 2,\n  class: \"pagination-style-second\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_skeleton = _resolveComponent(\"el-skeleton\");\n  const _component_movie_strip = _resolveComponent(\"movie-strip\");\n  const _component_comment_strip = _resolveComponent(\"comment-strip\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_blank_page = _resolveComponent(\"blank-page\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_skeleton, {\n    loading: $setup.loading,\n    rows: 5,\n    animated: \"\"\n  }, null, 8 /* PROPS */, [\"loading\"]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.moments, (moment, index) => {\n    return _openBlock(), _createElementBlock(_Fragment, {\n      key: index\n    }, [_createVNode(_component_comment_strip, {\n      comment: moment.commentStripVo\n    }, {\n      movieInfo: _withCtx(() => [_createVNode(_component_movie_strip, {\n        movie: moment.movieStripVo\n      }, null, 8 /* PROPS */, [\"movie\"])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"comment\"]), _createVNode(_component_el_divider)], 64 /* STABLE_FRAGMENT */);\n  }), 128 /* KEYED_FRAGMENT */)), !$setup.loading && !$setup.moments.length ? (_openBlock(), _createBlock(_component_blank_page, {\n    key: 0,\n    \"page-name\": 'moment'\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 分页 样式1\"), $setup.total > 10 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_pagination, {\n    style: {\n      \"justify-content\": \"center\"\n    },\n    currentPage: $setup.currentPage,\n    \"onUpdate:currentPage\": _cache[0] || (_cache[0] = $event => $setup.currentPage = $event),\n    \"page-size\": $setup.pageSize,\n    \"onUpdate:page-size\": _cache[1] || (_cache[1] = $event => $setup.pageSize = $event),\n    total: $setup.total,\n    \"onUpdate:total\": _cache[2] || (_cache[2] = $event => $setup.total = $event),\n    \"pager-count\": \"7\",\n    background: \"\",\n    layout: \"total, prev, pager, next, jumper\"\n  }, null, 8 /* PROPS */, [\"currentPage\", \"page-size\", \"total\"])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 分页 样式2 \"), $setup.total > 10 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_el_pagination, {\n    style: {\n      \"justify-content\": \"center\"\n    },\n    currentPage: $setup.currentPage,\n    \"onUpdate:currentPage\": _cache[3] || (_cache[3] = $event => $setup.currentPage = $event),\n    \"page-size\": $setup.pageSize,\n    \"onUpdate:page-size\": _cache[4] || (_cache[4] = $event => $setup.pageSize = $event),\n    total: $setup.total,\n    \"onUpdate:total\": _cache[5] || (_cache[5] = $event => $setup.total = $event),\n    \"pager-count\": \"5\",\n    small: \"\",\n    background: \"\",\n    layout: \"prev, pager, next, jumper\"\n  }, null, 8 /* PROPS */, [\"currentPage\", \"page-size\", \"total\"])])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;;EAeyBA,KAAK,EAAC;;;;EAaNA,KAAK,EAAC;;;;;;;;;6DA3B7BC,aAAoDC;IAAtCC,OAAO,EAAEC,cAAO;IAAGC,IAAI,EAAE,CAAC;IAAEC,QAAQ,EAAR;2DAE1CC,oBAOWC,6BAPyBJ,cAAO,GAAzBK,MAAM,EAAEC,KAAK;;WAAoBA;IAAK,IACtDT,aAIgBU;MAJAC,OAAO,EAAEH,MAAM,CAACI;;MACbC,SAAS,WACxB,MAAwD,CAAxDb,aAAwDc;QAA1CC,KAAK,EAAEP,MAAM,CAACQ;;;sDAGhChB,aAAaiB;mCAGId,cAAO,KAAKA,cAAO,CAACe,MAAM,kBAA7CC,aAAkFC;;IAAlC,WAAS,EAAE;2CAE3DC,8BAAc,EACHlB,YAAK,uBAAhBG,oBAUM,OAVNgB,UAUM,GATJtB,aAQEuB;IAPEC,KAA+B,EAA/B;MAAA;IAAA,CAA+B;IACvBC,WAAW,EAAEtB,kBAAW;gEAAXA,kBAAW;IACxB,WAAS,EAAEA,eAAQ;8DAARA,eAAQ;IACnBuB,KAAK,EAAEvB,YAAK;0DAALA,YAAK;IACpB,aAAW,EAAC,GAAG;IACfwB,UAAU,EAAV,EAAU;IACVC,MAAM,EAAC;yGAIbP,+BAAe,EACJlB,YAAK,uBAAhBG,oBAWM,OAXNuB,UAWM,GAVJ7B,aASEuB;IAREC,KAA+B,EAA/B;MAAA;IAAA,CAA+B;IACvBC,WAAW,EAAEtB,kBAAW;gEAAXA,kBAAW;IACxB,WAAS,EAAEA,eAAQ;8DAARA,eAAQ;IACnBuB,KAAK,EAAEvB,YAAK;0DAALA,YAAK;IACpB,aAAW,EAAC,GAAG;IACf2B,KAAK,EAAL,EAAK;IACLH,UAAU,EAAV,EAAU;IACVC,MAAM,EAAC","names":["class","_createVNode","_component_el_skeleton","loading","$setup","rows","animated","_createElementBlock","_Fragment","moment","index","_component_comment_strip","comment","commentStripVo","movieInfo","_component_movie_strip","movie","movieStripVo","_component_el_divider","length","_createBlock","_component_blank_page","_createCommentVNode","_hoisted_1","_component_el_pagination","style","currentPage","total","background","layout","_hoisted_2","small"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\views\\personal\\info\\MomentsView.vue"],"sourcesContent":["<template>\r\n  <el-skeleton :loading=\"loading\" :rows=\"5\" animated/>\r\n\r\n  <template v-for=\"(moment, index) in moments\" :key=\"index\">\r\n    <comment-strip :comment=\"moment.commentStripVo\">\r\n      <template v-slot:movieInfo>\r\n        <movie-strip :movie=\"moment.movieStripVo\"></movie-strip>\r\n      </template>\r\n    </comment-strip>\r\n    <el-divider/>\r\n  </template>\r\n\r\n  <blank-page v-if=\"!loading && !moments.length\" :page-name=\"'moment'\"></blank-page>\r\n\r\n  <!-- 分页 样式1-->\r\n  <div v-if=\"total > 10\" class=\"pagination-style-first\">\r\n    <el-pagination\r\n        style=\"justify-content: center\"\r\n        v-model:currentPage=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        v-model:total=\"total\"\r\n        pager-count=\"7\"\r\n        background\r\n        layout=\"total, prev, pager, next, jumper\"\r\n    />\r\n  </div>\r\n\r\n  <!-- 分页 样式2 -->\r\n  <div v-if=\"total > 10\" class=\"pagination-style-second\">\r\n    <el-pagination\r\n        style=\"justify-content: center\"\r\n        v-model:currentPage=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        v-model:total=\"total\"\r\n        pager-count=\"5\"\r\n        small\r\n        background\r\n        layout=\"prev, pager, next, jumper\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CommentStrip from \"@/components/basic/CommentStrip\";\r\nimport commentRequest from \"@/api/comment\";\r\nimport {ref, watch} from \"vue\";\r\nimport MovieStrip from \"@/components/basic/MovieStrip\";\r\nimport SvgIcon from \"@/components/basic/SvgIcon\";\r\nimport BlankPage from \"@/components/basic/BlankPage\";\r\n\r\nexport default {\r\n  name: \"MomentsView\",\r\n  components: {BlankPage, MovieStrip, CommentStrip, SvgIcon},\r\n  setup() {\r\n    let loading = ref(true)\r\n    let moments = ref([])\r\n\r\n    // 分页查询需要用到的一些数据\r\n    let currentPage = ref(1); // 当前页码\r\n    let pageSize = ref(10);   // 每页电影数量\r\n    let total = ref(0);      // 总电影数\r\n\r\n    const getMoreMoments = () => {\r\n      moments.value = []\r\n      loading.value = true;\r\n      commentRequest.getCommentMovieMoments(currentPage.value, pageSize.value).then(res => {\r\n        if (res.code === 200) {\r\n          moments.value = res.data.records;\r\n          total.value = res.data.total;\r\n          loading.value = false;\r\n        }\r\n      }).catch(err => {\r\n        console.error(err)\r\n      })\r\n    }\r\n    getMoreMoments();\r\n\r\n    /**\r\n     * 监听`当前页码`变化\r\n     * 若页码发生变化，重新请求电影数据，随后页面发生变化。\r\n     */\r\n    watch(currentPage, (newValue, oldValue) => {\r\n      // 页面回到顶部\r\n      document.body.scrollTop = 0;\r\n      document.documentElement.scrollTop = 0;\r\n      // 兼容IE\r\n      window.scrollTo(0, 0);\r\n\r\n      getMoreMoments();\r\n    });\r\n\r\n    return {\r\n      currentPage,\r\n      pageSize,\r\n      total,\r\n      loading,\r\n      moments\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/* 分页模块样式 */\r\n.pagination-style-first, .pagination-style-second {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.pagination-style-first {\r\n  display: block;\r\n}\r\n\r\n.pagination-style-second {\r\n  display: none;\r\n}\r\n\r\n@media screen and (max-width: 1000px) {\r\n  .pagination-style-first {\r\n    display: none;\r\n  }\r\n\r\n  .pagination-style-second {\r\n    display: block;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}