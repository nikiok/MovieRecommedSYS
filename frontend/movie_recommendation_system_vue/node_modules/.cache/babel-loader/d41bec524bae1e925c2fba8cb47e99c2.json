{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-3e978b2c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"movie-strip-slot-header\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"推荐指数\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_skeleton = _resolveComponent(\"el-skeleton\");\n  const _component_svg_icon = _resolveComponent(\"svg-icon\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_movie_strip = _resolveComponent(\"movie-strip\");\n  const _component_blank_page = _resolveComponent(\"blank-page\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_skeleton, {\n    loading: $setup.loading,\n    rows: 5,\n    animated: \"\"\n  }, null, 8 /* PROPS */, [\"loading\"]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.recommendedMovies, movie => {\n    return _openBlock(), _createBlock(_component_movie_strip, {\n      key: movie.id,\n      movie: movie,\n      style: {\n        \"margin-bottom\": \"1rem\"\n      }\n    }, {\n      header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_svg_icon, {\n        \"icon-class\": \"recommendation_5\"\n      }), _hoisted_2, _createVNode(_component_el_divider, {\n        direction: \"vertical\"\n      }), _createElementVNode(\"span\", null, _toDisplayString(movie.idx) + \"%\", 1 /* TEXT */)])]),\n\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"movie\"]);\n  }), 128 /* KEYED_FRAGMENT */)), !$setup.loading && !$setup.recommendedMovies.length ? (_openBlock(), _createBlock(_component_blank_page, {\n    key: 0,\n    \"page-name\": 'recommendation'\n  })) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;EAMaA,KAAK,EAAC;AAAyB;gEAElCC,oBAAiB,cAAX,MAAI;;;;;;;;6DAPlBC,aAAoDC;IAAtCC,OAAO,EAAEC,cAAO;IAAGC,IAAI,EAAE,CAAC;IAAEC,QAAQ,EAAR;2DAE1CC,oBAWWC,6BAXeJ,wBAAiB,EAA1BK,KAAK;yBACpBC,aAScC;WAVmCF,KAAK,CAACG,EAAE;MAC3CH,KAAK,EAAEA,KAAK;MAAEI,KAA4B,EAA5B;QAAA;MAAA;;MACTC,MAAM,WACrB,MAKM,CALNd,oBAKM,OALNe,UAKM,GAJJd,aAAmDe;QAAzC,YAAU,EAAC;MAAkB,IACvCC,UAAiB,EACjBhB,aAAkCiB;QAAtBC,SAAS,EAAC;MAAU,IAChCnB,oBAA6B,+BAApBS,KAAK,CAACW,GAAG,IAAG,GAAC;;;;mCAMXhB,cAAO,KAAKA,wBAAiB,CAACiB,MAAM,kBAAvDX,aAAoGY;;IAA1C,WAAS,EAAE","names":["class","_createElementVNode","_createVNode","_component_el_skeleton","loading","$setup","rows","animated","_createElementBlock","_Fragment","movie","_createBlock","_component_movie_strip","id","style","header","_hoisted_1","_component_svg_icon","_hoisted_2","_component_el_divider","direction","idx","length","_component_blank_page"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\views\\personal\\info\\RecommendationView.vue"],"sourcesContent":["<template>\r\n  <el-skeleton :loading=\"loading\" :rows=\"5\" animated/>\r\n\r\n  <template v-for=\"movie in recommendedMovies\" :key=\"movie.id\">\r\n    <movie-strip :movie=\"movie\" style=\"margin-bottom: 1rem;\">\r\n      <template v-slot:header>\r\n        <div class=\"movie-strip-slot-header\">\r\n          <svg-icon icon-class=\"recommendation_5\"></svg-icon>\r\n          <span>推荐指数</span>\r\n          <el-divider direction=\"vertical\"/>\r\n          <span>{{ movie.idx }}%</span>\r\n        </div>\r\n      </template>\r\n    </movie-strip>\r\n  </template>\r\n\r\n  <blank-page v-if=\"!loading && !recommendedMovies.length\" :page-name=\"'recommendation'\"></blank-page>\r\n</template>\r\n\r\n<script>\r\nimport recommendationRequest from \"@/api/recommendation\";\r\nimport {ref} from \"vue\";\r\nimport MovieStrip from \"@/components/basic/MovieStrip\";\r\nimport BlankPage from \"@/components/basic/BlankPage\";\r\n\r\nexport default {\r\n  name: \"RecommendationView\",\r\n  components: {MovieStrip, BlankPage},\r\n  setup() {\r\n    let loading = ref(true)\r\n    let recommendedMovies = ref([])\r\n    recommendationRequest.getRecommendedMoviesByUserId().then(res => {\r\n      if (res.code === 200) {\r\n        recommendedMovies.value = res.data\r\n        recommendedMovies.value.forEach((movie, idx) => {\r\n          movie.idx *= 100\r\n          // 保留两位小数（四舍五入）\r\n          movie.idx = movie.idx.toFixed(2)\r\n          return movie\r\n        })\r\n        loading.value = false\r\n      }\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n\r\n    return {\r\n      loading,\r\n      recommendedMovies\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.movie-strip-slot-header {\r\n  color: rgb(250, 114, 104);\r\n  font-size: 1.2rem;\r\n  font-weight: initial;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}