{"ast":null,"code":"import { isClient } from '@vueuse/core';\nimport '../../../utils/index.mjs';\nimport { isElement } from '../../../utils/types.mjs';\nconst buildPopperOptions = (props, arrowProps) => {\n  const {\n    placement,\n    strategy,\n    popperOptions\n  } = props;\n  const options = {\n    placement,\n    strategy,\n    ...popperOptions,\n    modifiers: genModifiers(props)\n  };\n  attachArrow(options, arrowProps);\n  deriveExtraModifiers(options, popperOptions == null ? void 0 : popperOptions.modifiers);\n  return options;\n};\nconst unwrapMeasurableEl = $el => {\n  if (!isClient) return null;\n  let el = null;\n  if (!$el) return null;\n  if (\"getBoundingClientRect\" in $el || isElement($el)) {\n    el = $el;\n  } else {\n    el = $el.$el;\n  }\n  return el;\n};\nfunction genModifiers(options) {\n  const {\n    offset,\n    gpuAcceleration,\n    fallbackPlacements\n  } = options;\n  return [{\n    name: \"offset\",\n    options: {\n      offset: [0, offset != null ? offset : 12]\n    }\n  }, {\n    name: \"preventOverflow\",\n    options: {\n      padding: {\n        top: 2,\n        bottom: 2,\n        left: 5,\n        right: 5\n      }\n    }\n  }, {\n    name: \"flip\",\n    options: {\n      padding: 5,\n      fallbackPlacements: fallbackPlacements != null ? fallbackPlacements : []\n    }\n  }, {\n    name: \"computeStyles\",\n    options: {\n      gpuAcceleration,\n      adaptive: gpuAcceleration\n    }\n  }];\n}\nfunction attachArrow(options, {\n  arrowEl,\n  arrowOffset\n}) {\n  options.modifiers.push({\n    name: \"arrow\",\n    options: {\n      element: arrowEl,\n      padding: arrowOffset != null ? arrowOffset : 5\n    }\n  });\n}\nfunction deriveExtraModifiers(options, modifiers) {\n  if (modifiers) {\n    options.modifiers = [...options.modifiers, ...(modifiers != null ? modifiers : [])];\n  }\n}\nexport { buildPopperOptions, unwrapMeasurableEl };","map":{"version":3,"mappings":";;;AAEY,MAACA,kBAAkB,GAAGA,CAACC,KAAK,EAAEC,UAAU,KAAK;EACvD,MAAM;IAAEC,SAAS;IAAEC,QAAQ;IAAEC;EAAa,CAAE,GAAGJ,KAAK;EACpD,MAAMK,OAAO,GAAG;IACdH,SAAS;IACTC,QAAQ;IACR,GAAGC,aAAa;IAChBE,SAAS,EAAEC,YAAY,CAACP,KAAK;EACjC,CAAG;EACDQ,WAAW,CAACH,OAAO,EAAEJ,UAAU,CAAC;EAChCQ,oBAAoB,CAACJ,OAAO,EAAED,aAAa,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,aAAa,CAACE,SAAS,CAAC;EACvF,OAAOD,OAAO;AAChB;AACY,MAACK,kBAAkB,GAAIC,GAAG,IAAK;EACzC,IAAI,CAACC,QAAQ,EACX,OAAO,IAAI;EACb,IAAIC,EAAE,GAAG,IAAI;EACb,IAAI,CAACF,GAAG,EACN,OAAO,IAAI;EACb,IAAI,uBAAuB,IAAIA,GAAG,IAAIG,SAAS,CAACH,GAAG,CAAC,EAAE;IACpDE,EAAE,GAAGF,GAAG;EACZ,CAAG,MAAM;IACLE,EAAE,GAAGF,GAAG,CAACA,GAAG;EAChB;EACE,OAAOE,EAAE;AACX;AACA,SAASN,YAAYA,CAACF,OAAO,EAAE;EAC7B,MAAM;IAAEU,MAAM;IAAEC,eAAe;IAAEC;EAAkB,CAAE,GAAGZ,OAAO;EAC/D,OAAO,CACL;IACEa,IAAI,EAAE,QAAQ;IACdb,OAAO,EAAE;MACPU,MAAM,EAAE,CAAC,CAAC,EAAEA,MAAM,IAAI,IAAI,GAAGA,MAAM,GAAG,EAAE;IAChD;EACA,CAAK,EACD;IACEG,IAAI,EAAE,iBAAiB;IACvBb,OAAO,EAAE;MACPc,OAAO,EAAE;QACPC,GAAG,EAAE,CAAC;QACNC,MAAM,EAAE,CAAC;QACTC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE;MACjB;IACA;EACA,CAAK,EACD;IACEL,IAAI,EAAE,MAAM;IACZb,OAAO,EAAE;MACPc,OAAO,EAAE,CAAC;MACVF,kBAAkB,EAAEA,kBAAkB,IAAI,IAAI,GAAGA,kBAAkB,GAAG;IAC9E;EACA,CAAK,EACD;IACEC,IAAI,EAAE,eAAe;IACrBb,OAAO,EAAE;MACPW,eAAe;MACfQ,QAAQ,EAAER;IAClB;EACA,CAAK,CACF;AACH;AACA,SAASR,WAAWA,CAACH,OAAO,EAAE;EAAEoB,OAAO;EAAEC;AAAW,CAAE,EAAE;EACtDrB,OAAO,CAACC,SAAS,CAACqB,IAAI,CAAC;IACrBT,IAAI,EAAE,OAAO;IACbb,OAAO,EAAE;MACPuB,OAAO,EAAEH,OAAO;MAChBN,OAAO,EAAEO,WAAW,IAAI,IAAI,GAAGA,WAAW,GAAG;IACnD;EACA,CAAG,CAAC;AACJ;AACA,SAASjB,oBAAoBA,CAACJ,OAAO,EAAEC,SAAS,EAAE;EAChD,IAAIA,SAAS,EAAE;IACbD,OAAO,CAACC,SAAS,GAAG,CAAC,GAAGD,OAAO,CAACC,SAAS,EAAE,IAAGA,SAAS,IAAI,IAAI,GAAGA,SAAS,GAAG,EAAE,EAAC;EACrF;AACA","names":["buildPopperOptions","props","arrowProps","placement","strategy","popperOptions","options","modifiers","genModifiers","attachArrow","deriveExtraModifiers","unwrapMeasurableEl","$el","isClient","el","isElement","offset","gpuAcceleration","fallbackPlacements","name","padding","top","bottom","left","right","adaptive","arrowEl","arrowOffset","push","element"],"sources":["../../../../../../packages/components/popper/src/utils.ts"],"sourcesContent":["import { isClient } from '@vueuse/core'\nimport { isElement } from '@element-plus/utils'\n\nimport type { ComponentPublicInstance } from 'vue'\nimport type { UsePopperCoreConfigProps, Measurable } from './popper'\n\ntype ArrowProps = {\n  arrowEl: HTMLElement | null\n  arrowOffset: number | undefined\n}\n\nexport const buildPopperOptions = (\n  props: UsePopperCoreConfigProps,\n  arrowProps: ArrowProps\n) => {\n  const { placement, strategy, popperOptions } = props\n  const options = {\n    placement,\n    strategy,\n    ...popperOptions,\n    modifiers: genModifiers(props),\n  }\n\n  attachArrow(options, arrowProps)\n  deriveExtraModifiers(options, popperOptions?.modifiers)\n  return options\n}\n\nexport const unwrapMeasurableEl = (\n  $el: Measurable | null | ComponentPublicInstance\n) => {\n  if (!isClient) return null\n  let el: HTMLElement | null = null\n  if (!$el) return null\n\n  if ('getBoundingClientRect' in $el || isElement($el)) {\n    el = $el as HTMLElement\n  } else {\n    // refs can be Vue component\n    el = ($el as any as ComponentPublicInstance).$el\n  }\n  return el\n}\n\nfunction genModifiers(options: UsePopperCoreConfigProps) {\n  const { offset, gpuAcceleration, fallbackPlacements } = options\n  return [\n    {\n      name: 'offset',\n      options: {\n        offset: [0, offset ?? 12],\n      },\n    },\n    {\n      name: 'preventOverflow',\n      options: {\n        padding: {\n          top: 2,\n          bottom: 2,\n          left: 5,\n          right: 5,\n        },\n      },\n    },\n    {\n      name: 'flip',\n      options: {\n        padding: 5,\n        fallbackPlacements: fallbackPlacements ?? [],\n      },\n    },\n    {\n      name: 'computeStyles',\n      options: {\n        gpuAcceleration,\n        adaptive: gpuAcceleration,\n      },\n    },\n  ]\n}\n\nfunction attachArrow(options: any, { arrowEl, arrowOffset }: ArrowProps) {\n  options.modifiers.push({\n    name: 'arrow',\n    options: {\n      element: arrowEl,\n      padding: arrowOffset ?? 5,\n    },\n  } as any)\n}\n\nfunction deriveExtraModifiers(\n  options: any,\n  modifiers: UsePopperCoreConfigProps['popperOptions']['modifiers']\n) {\n  if (modifiers) {\n    options.modifiers = [...options.modifiers, ...(modifiers ?? [])]\n  }\n}\n"]},"metadata":{},"sourceType":"module"}