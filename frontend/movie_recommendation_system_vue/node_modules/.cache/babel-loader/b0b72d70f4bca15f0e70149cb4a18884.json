{"ast":null,"code":"import { ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport movieRequest from \"@/api/movie\";\nimport { ErrorMessage } from \"@/utils/my-message\";\nexport default {\n  name: 'MovieInfo',\n  setup() {\n    const router = useRouter();\n    let actorsDialogVisible = ref(false);\n    let introductionDialogVisible = ref(false);\n    let movie = ref({\n      actors: '',\n      alias: '',\n      did: '',\n      directors: '',\n      five: '',\n      four: '',\n      id: '',\n      imdb: '',\n      introduction: '',\n      languages: '',\n      name: '',\n      num: '',\n      one: '',\n      pic: '',\n      regions: '',\n      releaseDate: '',\n      runtime: '',\n      score: '',\n      three: '',\n      two: '',\n      types: '',\n      writers: '',\n      year: ''\n    });\n    let score = ref(0);\n    let percentages = ref([]);\n\n    // 初始化界面前，请求电影信息\n    movieRequest.getMovieInfo(router.currentRoute.value.params.id).then(res => {\n      if (res.code === 200) {\n        movie.value = res.data;\n        score.value = movie.value.score / 2.0;\n        percentages.value = [{\n          color: '#f56c6c',\n          percentage: movie.value.five,\n          text: '5星'\n        }, {\n          color: '#e6a23c',\n          percentage: movie.value.four,\n          text: '4星'\n        }, {\n          color: '#5cb87a',\n          percentage: movie.value.three,\n          text: '3星'\n        }, {\n          color: '#1989fa',\n          percentage: movie.value.two,\n          text: '2星'\n        }, {\n          color: '#6f7ad3',\n          percentage: movie.value.one,\n          text: '1星'\n        }];\n      } else {\n        ErrorMessage(res.msg);\n      }\n    }).catch(err => {\n      ErrorMessage(err);\n    });\n    return {\n      actorsDialogVisible,\n      introductionDialogVisible,\n      movie,\n      score,\n      percentages\n    };\n  }\n};","map":{"version":3,"mappings":"AA6HA,SAAQA,GAAG,QAAO,KAAK;AACvB,SAAQC,SAAS,QAAO,YAAY;AACpC,OAAOC,YAAW,MAAO,aAAa;AACtC,SAAQC,YAAY,QAAO,oBAAoB;AAE/C,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAKA,GAAG;IACN,MAAMC,MAAK,GAAIL,SAAS,CAAC,CAAC;IAC1B,IAAIM,mBAAkB,GAAIP,GAAG,CAAC,KAAK,CAAC;IACpC,IAAIQ,yBAAwB,GAAIR,GAAG,CAAC,KAAK,CAAC;IAC1C,IAAIS,KAAI,GAAIT,GAAG,CAAC;MACdU,MAAM,EAAE,EAAE;MACVC,KAAK,EAAE,EAAE;MACTC,GAAG,EAAE,EAAE;MACPC,SAAS,EAAE,EAAE;MACbC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,EAAE,EAAE,EAAE;MACNC,IAAI,EAAE,EAAE;MACRC,YAAY,EAAE,EAAE;MAChBC,SAAS,EAAE,EAAE;MACbf,IAAI,EAAE,EAAE;MACRgB,GAAG,EAAE,EAAE;MACPC,GAAG,EAAE,EAAE;MACPC,GAAG,EAAE,EAAE;MACPC,OAAO,EAAE,EAAE;MACXC,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,GAAG,EAAE,EAAE;MACPC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAE;IACR,CAAC,CAAC;IACF,IAAIL,KAAI,GAAI1B,GAAG,CAAC,CAAC,CAAC;IAClB,IAAIgC,WAAU,GAAIhC,GAAG,CAAC,EAAE,CAAC;;IAEzB;IACAE,YAAY,CAAC+B,YAAY,CACrB3B,MAAM,CAAC4B,YAAY,CAACC,KAAK,CAACC,MAAM,CAACpB,EACrC,CAAC,CAACqB,IAAI,CAACC,GAAE,IAAK;MACZ,IAAIA,GAAG,CAACC,IAAG,KAAM,GAAG,EAAE;QACpB9B,KAAK,CAAC0B,KAAI,GAAIG,GAAG,CAACE,IAAI;QACtBd,KAAK,CAACS,KAAI,GAAI1B,KAAK,CAAC0B,KAAK,CAACT,KAAI,GAAI,GAAG;QACrCM,WAAW,CAACG,KAAI,GAAI,CAClB;UAACM,KAAK,EAAE,SAAS;UAAEC,UAAU,EAAEjC,KAAK,CAAC0B,KAAK,CAACrB,IAAI;UAAE6B,IAAI,EAAE;QAAI,CAAC,EAC5D;UAACF,KAAK,EAAE,SAAS;UAAEC,UAAU,EAAEjC,KAAK,CAAC0B,KAAK,CAACpB,IAAI;UAAE4B,IAAI,EAAE;QAAI,CAAC,EAC5D;UAACF,KAAK,EAAE,SAAS;UAAEC,UAAU,EAAEjC,KAAK,CAAC0B,KAAK,CAACR,KAAK;UAAEgB,IAAI,EAAE;QAAI,CAAC,EAC7D;UAACF,KAAK,EAAE,SAAS;UAAEC,UAAU,EAAEjC,KAAK,CAAC0B,KAAK,CAACP,GAAG;UAAEe,IAAI,EAAE;QAAI,CAAC,EAC3D;UAACF,KAAK,EAAE,SAAS;UAAEC,UAAU,EAAEjC,KAAK,CAAC0B,KAAK,CAACd,GAAG;UAAEsB,IAAI,EAAE;QAAI,CAAC,CAC7D;MACF,OAAO;QACLxC,YAAY,CAACmC,GAAG,CAACM,GAAG;MACtB;IACF,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;MACd3C,YAAY,CAAC2C,GAAG;IAClB,CAAC;IAED,OAAO;MACLvC,mBAAmB;MACnBC,yBAAyB;MACzBC,KAAK;MACLiB,KAAK;MACLM;IACF;EACF;AACF","names":["ref","useRouter","movieRequest","ErrorMessage","name","setup","router","actorsDialogVisible","introductionDialogVisible","movie","actors","alias","did","directors","five","four","id","imdb","introduction","languages","num","one","pic","regions","releaseDate","runtime","score","three","two","types","writers","year","percentages","getMovieInfo","currentRoute","value","params","then","res","code","data","color","percentage","text","msg","catch","err"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\components\\movie\\MovieInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"blur-bg\" :style=\"`background-image: url(${movie.pic})`\"></div>\r\n  <div class=\"movie-info-top\">\r\n    <div class=\"background\">\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <div class=\"movie-info-top-left\">\r\n            <img class=\"image\" :src=\"movie.pic\"/>\r\n          </div>\r\n        </el-col>\r\n\r\n        <el-col :span=\"16\">\r\n          <div class=\"movie-info-top-right\">\r\n            <!-- 电影名 -->\r\n            <div class=\"movie-name\">\r\n              {{ movie.name }}\r\n            </div>\r\n\r\n            <!-- 基本信息 + 评分 -->\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <div class=\"each\">\r\n                  <span>导演：</span>\r\n                  <span>{{ movie.directors }}</span>\r\n                </div>\r\n                <div class=\"each\">\r\n                  <span>类型：</span>\r\n                  <span>{{ movie.types }}</span>\r\n                </div>\r\n                <div class=\"each\">\r\n                  <span>制片国家/地区：</span>\r\n                  <span>{{ movie.regions }}</span>\r\n                </div>\r\n                <div class=\"each\">\r\n                  <span>语言：</span>\r\n                  <span>{{ movie.languages }}</span>\r\n                </div>\r\n              </el-col>\r\n\r\n              <el-col :span=\"16\">\r\n                <div class=\"rate\">\r\n                  <el-rate\r\n                      v-model=\"score\"\r\n                      disabled\r\n                      show-score\r\n                      size=\"small\"\r\n                      text-color=\"#ff9900\"\r\n                      :score-template=\"`${ movie.score }`\"\r\n                  />\r\n                </div>\r\n                <el-row class=\"rate\" v-for=\"(p,index) in percentages\" :key=\"index\">\r\n                  <el-col :span=\"5\" :style=\"`color: ${p.color}; text-align: center;`\">{{ p.text }}</el-col>\r\n                  <el-col :span=\"19\">\r\n                    <el-progress :percentage=\"p.percentage\" :color=\"p.color\"/>\r\n                  </el-col>\r\n\r\n                </el-row>\r\n              </el-col>\r\n            </el-row>\r\n            <!-- 主演 + 电影简介 展现形式1 -->\r\n            <div class=\"show-first\">\r\n              <el-row class=\"actors-and-introduction\">\r\n                <el-col :span=\"8\">\r\n                  <span>主演：</span>\r\n                  <span class=\"actors\">{{ movie.actors }}</span>\r\n                </el-col>\r\n                <el-col :span=\"16\">\r\n                  <div class=\"introduction\">\r\n                    <el-collapse>\r\n                      <el-collapse-item title=\"&nbsp;&nbsp;&nbsp;&nbsp;电影简介\" name=\"introduction\">\r\n                        <div style=\"margin: 0 1rem\">\r\n                          {{ movie.introduction }}\r\n                        </div>\r\n                      </el-collapse-item>\r\n                    </el-collapse>\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n            <!-- 主演 + 电影简介 展现形式2 -->\r\n            <div class=\"show-second\">\r\n              <el-row class=\"actors-and-introduction\">\r\n                <el-col :span=\"8\">\r\n                  <el-button class=\"actors-second\" type=\"text\" @click=\"actorsDialogVisible = true\">主演...</el-button>\r\n                  <el-dialog\r\n                      v-model=\"actorsDialogVisible\"\r\n                      title=\"主演\"\r\n                      width=\"25rem\"\r\n                      :lock-scroll=\"false\">\r\n                    <span>{{ movie.actors }}</span>\r\n                    <template #footer>\r\n                    <span class=\"dialog-footer\">\r\n                      <el-button type=\"primary\" @click=\"actorsDialogVisible = false\">确认</el-button>\r\n                    </span>\r\n                    </template>\r\n                  </el-dialog>\r\n                </el-col>\r\n\r\n                <el-col :span=\"16\">\r\n                  <el-button class=\"introduction-second\" type=\"text\" @click=\"introductionDialogVisible = true\">电影简介...\r\n                  </el-button>\r\n                  <el-dialog\r\n                      v-model=\"introductionDialogVisible\"\r\n                      title=\"电影简介\"\r\n                      width=\"25rem\"\r\n                      :lock-scroll=\"false\">\r\n                    <span>{{ movie.introduction }}</span>\r\n                    <template #footer>\r\n                    <span class=\"dialog-footer\">\r\n                      <el-button type=\"primary\" @click=\"introductionDialogVisible = false\">确认</el-button>\r\n                    </span>\r\n                    </template>\r\n                  </el-dialog>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ref} from \"vue\";\r\nimport {useRouter} from \"vue-router\";\r\nimport movieRequest from \"@/api/movie\";\r\nimport {ErrorMessage} from \"@/utils/my-message\";\r\n\r\nexport default {\r\n  name: 'MovieInfo',\r\n  setup() {\r\n    const router = useRouter();\r\n    let actorsDialogVisible = ref(false);\r\n    let introductionDialogVisible = ref(false);\r\n    let movie = ref({\r\n      actors: '',\r\n      alias: '',\r\n      did: '',\r\n      directors: '',\r\n      five: '',\r\n      four: '',\r\n      id: '',\r\n      imdb: '',\r\n      introduction: '',\r\n      languages: '',\r\n      name: '',\r\n      num: '',\r\n      one: '',\r\n      pic: '',\r\n      regions: '',\r\n      releaseDate: '',\r\n      runtime: '',\r\n      score: '',\r\n      three: '',\r\n      two: '',\r\n      types: '',\r\n      writers: '',\r\n      year: '',\r\n    });\r\n    let score = ref(0);\r\n    let percentages = ref([]);\r\n\r\n    // 初始化界面前，请求电影信息\r\n    movieRequest.getMovieInfo(\r\n        router.currentRoute.value.params.id\r\n    ).then(res => {\r\n      if (res.code === 200) {\r\n        movie.value = res.data;\r\n        score.value = movie.value.score / 2.0;\r\n        percentages.value = [\r\n          {color: '#f56c6c', percentage: movie.value.five, text: '5星'},\r\n          {color: '#e6a23c', percentage: movie.value.four, text: '4星'},\r\n          {color: '#5cb87a', percentage: movie.value.three, text: '3星'},\r\n          {color: '#1989fa', percentage: movie.value.two, text: '2星'},\r\n          {color: '#6f7ad3', percentage: movie.value.one, text: '1星'},\r\n        ]\r\n      } else {\r\n        ErrorMessage(res.msg)\r\n      }\r\n    }).catch(err => {\r\n      ErrorMessage(err)\r\n    })\r\n\r\n    return {\r\n      actorsDialogVisible,\r\n      introductionDialogVisible,\r\n      movie,\r\n      score,\r\n      percentages,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.blur-bg {\r\n  height: 36rem;\r\n  width: 100%;\r\n  filter: blur(1rem) brightness(85%);\r\n  position: absolute;\r\n  background-size: cover;\r\n}\r\n\r\n.movie-info-top {\r\n  height: 38rem;\r\n  width: 100%;\r\n  background-size: cover;\r\n}\r\n\r\n.movie-info-top .background {\r\n  height: 36rem;\r\n}\r\n\r\n.movie-info-top-left, .movie-info-top-right {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n/************** top left **************/\r\n.movie-info-top-left .image {\r\n  margin-top: 5%;\r\n  margin-left: 20%;\r\n  text-align: center;\r\n  width: 60%;\r\n}\r\n\r\n/************** top right **************/\r\n.movie-info-top-right .movie-name {\r\n  padding-top: 2rem;\r\n  color: white;\r\n  width: 80%;\r\n  font-size: 2rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.movie-info-top-right .each {\r\n  color: white;\r\n  margin-top: 1rem;\r\n  max-width: 100%;\r\n}\r\n\r\n.movie-info-top-right .rate {\r\n  font-size: 0.7rem;\r\n  margin-left: 2rem;\r\n  margin-top: 5px;\r\n  width: 30%;\r\n}\r\n\r\n.movie-info-top-right .actors-and-introduction {\r\n  color: white;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.movie-info-top-right .introduction {\r\n  margin-left: 2rem;\r\n  width: 50%;\r\n}\r\n\r\n/deep/ .el-rate__text {\r\n  color: #ff9900;\r\n}\r\n\r\n/************** 主演 和 简介 样式2 **************/\r\n.actors-second, .introduction-second {\r\n  font-size: 1.3rem;\r\n}\r\n\r\n.introduction-second {\r\n  margin-left: 2rem;\r\n}\r\n\r\n@media screen and (max-width: 1200px) {\r\n  .show-first {\r\n    display: none;\r\n  }\r\n\r\n  .show-second {\r\n    display: block;\r\n  }\r\n\r\n  .movie-info-top {\r\n    height: 100%;\r\n  }\r\n\r\n  .movie-info-top .background {\r\n    height: 100%;\r\n  }\r\n\r\n  .movie-info-top-left .image {\r\n    margin-top: 20%;\r\n  }\r\n\r\n  .movie-info-top-right .rate {\r\n    width: 60%;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 1200px) and (max-width: 4000px) {\r\n  .show-first {\r\n    display: block;\r\n  }\r\n\r\n  .show-second {\r\n    display: none;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 450px) {\r\n  .blur-bg {\r\n    height: 26rem;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 450px) and (max-width: 501px) {\r\n  .blur-bg {\r\n    height: 25rem;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 501px) and (max-width: 700px) {\r\n  .blur-bg {\r\n    height: 23rem;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 700px) and (max-width: 800px) {\r\n  .blur-bg {\r\n    height: 24rem;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 800px) and (max-width: 1200px) {\r\n  .blur-bg {\r\n    height: 22rem;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}