{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, withKeys as _withKeys, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c6101e4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"bg\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"login-form-header\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  style: {\n    \"width\": \"75px\",\n    \"height\": \"75px\",\n    \"float\": \"left\",\n    \"padding-right\": \"40px\"\n  },\n  src: _imports_0,\n  alt: \"logo\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login-form-text\"\n}, \"电影推荐系统 - 登录\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"scan-and-forget-div\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 忘记密码? \");\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"登 录\");\nconst _hoisted_8 = {\n  class: \"login-form-footer\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 还没有账号？去注册 \");\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  style: {\n    \"font-weight\": \"bolder\",\n    \"font-size\": \"15px\"\n  },\n  class: \"el-icon-right\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_icon_user = _resolveComponent(\"icon-user\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_icon_lock = _resolveComponent(\"icon-lock\");\n  const _component_el_link = _resolveComponent(\"el-link\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"  <div class=\\\"bg\\\" style=\\\"background-image: url('https://api.xygeng.cn/Bing/')\\\"></div>\"), _hoisted_1, _createElementVNode(\"div\", {\n    name: \"animate__bounce\",\n    class: \"login-form my-border\",\n    onKeyup: _cache[2] || (_cache[2] = _withKeys((...args) => $setup.postLogin && $setup.postLogin(...args), [\"enter\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_link, {\n    to: \"/home\"\n  }, {\n    default: _withCtx(() => [_hoisted_3]),\n    _: 1 /* STABLE */\n  }), _hoisted_4]), _createVNode(_component_el_form, {\n    ref: \"loginFormRef\",\n    model: $setup.loginForm,\n    rules: $setup.rules\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"账 号\",\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        class: \"login-form-input\",\n        placeholder: \"账 号\",\n        modelValue: $setup.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loginForm.username = $event),\n        autofocus: \"\",\n        autocomplete: \"off\"\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"el-input__icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_icon_user)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"密 码\",\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        class: \"login-form-input\",\n        placeholder: \"密 码\",\n        modelValue: $setup.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.password = $event),\n        \"show-password\": \"\"\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"el-input__icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_icon_lock)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\"        <el-link href=\\\"/scanLogin\\\" class=\\\"my-font\\\" :underline=\\\"false\\\">\"), _createCommentVNode(\"          扫码登录\"), _createCommentVNode(\"        </el-link>\"), _createVNode(_component_el_link, {\n      href: \"/forget\",\n      class: \"my-font\",\n      underline: false\n    }, {\n      default: _withCtx(() => [_hoisted_6]),\n      _: 1 /* STABLE */\n    })]), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        onClick: $setup.postLogin,\n        class: \"login-form-button\",\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [_hoisted_7]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_link, {\n    href: \"/register\",\n    class: \"my-font\",\n    style: {\n      \"font-size\": \"16px\"\n    },\n    underline: false\n  }, {\n    default: _withCtx(() => [_hoisted_9, _hoisted_10]),\n    _: 1 /* STABLE */\n  })])], 32 /* HYDRATE_EVENTS */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";OAWkFA,UAAwB;;gEATxGC,oBAAsB;EAAjBC,KAAK,EAAC;AAAI;;EAORA,KAAK,EAAC;AAAmB;gEAE1BD,oBAA+G;EAA1GE,KAAoE,EAApE;IAAA;IAAA;IAAA;IAAA;EAAA,CAAoE;EAACC,GAAwB,EAAxBJ,UAAwB;EAACK,GAAG,EAAC;;gEAGzGJ,oBAA8C;EAAzCC,KAAK,EAAC;AAAiB,GAAC,aAAW;;EAmCnCA,KAAK,EAAC;AAAqB;iDAI6B,SAE3D;iDAIuE,KAAG;;EAIzEA,KAAK,EAAC;AAAmB;iDACyD,aAEnF;iEAAAD,oBAA0E;EAAvEE,KAA4C,EAA5C;IAAA;IAAA;EAAA,CAA4C;EAACD,KAAK,EAAC;;;;;;;;;;;;;6DAjE5DI,gHAA4F,EAC5FC,UAAsB,EACtBN,oBAkEM;IAjEFO,IAAI,EAAC,iBAAiB;IACtBN,KAAK,EAAC,sBAAsB;IAC3BO,OAAK,mDAAQC,6CAAS;MAGzBT,oBAMM,OANNU,UAMM,GALJC,aAEcC;IAFDC,EAAE,EAAC;EAAO;sBACrB,MAA+G,CAA/GC,UAA+G;;MAGjHC,UAA8C,IAGhDJ,aA4CUK;IA5CDC,GAAG,EAAC,cAAc;IAAEC,KAAK,EAAET,gBAAS;IAAGU,KAAK,EAAEV;;sBACrD,MAce,CAdfE,aAceS;MAdDC,KAAK,EAAC,KAAK;MAACC,IAAI,EAAC;;wBAC7B,MAYW,CAZXX,aAYWY;QAXPtB,KAAK,EAAC,kBAAkB;QACxBuB,WAAW,EAAC,KAAK;oBACRf,gBAAS,CAACgB,QAAQ;mEAAlBhB,gBAAS,CAACgB,QAAQ;QAC3BC,SAAS,EAAT,EAAS;QACTC,YAAY,EAAC;;QAEJC,MAAM,WACf,MAEU,CAFVjB,aAEUkB;UAFD5B,KAAK,EAAC;QAAgB;4BAC7B,MAAY,CAAZU,aAAYmB;;;;;;;QAMpBnB,aAaeS;MAbDC,KAAK,EAAC,KAAK;MAACC,IAAI,EAAC;;wBAC7B,MAWW,CAXXX,aAWWY;QAVPtB,KAAK,EAAC,kBAAkB;QACxBuB,WAAW,EAAC,KAAK;oBACRf,gBAAS,CAACsB,QAAQ;mEAAlBtB,gBAAS,CAACsB,QAAQ;QAC3B,eAAa,EAAb;;QAESH,MAAM,WACf,MAEU,CAFVjB,aAEUkB;UAFD5B,KAAK,EAAC;QAAgB;4BAC7B,MAAY,CAAZU,aAAYqB;;;;;;;QAMpBhC,oBAOM,OAPNiC,UAOM,GANJ5B,mGAA6E,EAC7EA,qCAAqB,EACrBA,yCAAyB,EACzBM,aAEUuB;MAFDC,IAAI,EAAC,SAAS;MAAClC,KAAK,EAAC,SAAS;MAAEmC,SAAS,EAAE;;wBAAO,MAE3D;;UAGFzB,aAEeS;wBADb,MAAsF,CAAtFT,aAAsF0B;QAA1EC,OAAK,EAAE7B,gBAAS;QAAER,KAAK,EAAC,mBAAmB;QAACsC,IAAI,EAAC;;0BAAU,MAAG;;;;;;;yCAI9EvC,oBAKM,OALNwC,UAKM,GAJJ7B,aAGUuB;IAHDC,IAAI,EAAC,WAAW;IAAClC,KAAK,EAAC,SAAS;IAACC,KAAuB,EAAvB;MAAA;IAAA,CAAuB;IAAEkC,SAAS,EAAE;;sBAAO,MAEnF,wBAA0E","names":["_imports_0","_createElementVNode","class","style","src","alt","_createCommentVNode","_hoisted_1","name","onKeyup","$setup","_hoisted_2","_createVNode","_component_router_link","to","_hoisted_3","_hoisted_4","_component_el_form","ref","model","rules","_component_el_form_item","label","prop","_component_el_input","placeholder","username","autofocus","autocomplete","prefix","_component_el_icon","_component_icon_user","password","_component_icon_lock","_hoisted_5","_component_el_link","href","underline","_component_el_button","onClick","type","_hoisted_8"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n  <!--  <div class=\"bg\" style=\"background-image: url('https://api.xygeng.cn/Bing/')\"></div>-->\r\n  <div class=\"bg\"></div>\r\n  <div\r\n      name=\"animate__bounce\"\r\n      class=\"login-form my-border\"\r\n      @keyup.enter=\"postLogin\"\r\n  >\r\n\r\n    <div class=\"login-form-header\">\r\n      <router-link to=\"/home\">\r\n        <img style=\"width: 75px; height: 75px; float: left; padding-right: 40px;\" src=\"../assets/logo.png\" alt=\"logo\"/>\r\n      </router-link>\r\n\r\n      <div class=\"login-form-text\">电影推荐系统 - 登录</div>\r\n    </div>\r\n\r\n    <el-form ref=\"loginFormRef\" :model=\"loginForm\" :rules=\"rules\">\r\n      <el-form-item label=\"账 号\" prop=\"username\">\r\n        <el-input\r\n            class=\"login-form-input\"\r\n            placeholder=\"账 号\"\r\n            v-model=\"loginForm.username\"\r\n            autofocus\r\n            autocomplete=\"off\"\r\n        >\r\n          <template #prefix>\r\n            <el-icon class=\"el-input__icon\">\r\n              <icon-user/>\r\n            </el-icon>\r\n          </template>\r\n        </el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"密 码\" prop=\"password\">\r\n        <el-input\r\n            class=\"login-form-input\"\r\n            placeholder=\"密 码\"\r\n            v-model=\"loginForm.password\"\r\n            show-password\r\n        >\r\n          <template #prefix>\r\n            <el-icon class=\"el-input__icon\">\r\n              <icon-lock/>\r\n            </el-icon>\r\n          </template>\r\n        </el-input>\r\n      </el-form-item>\r\n\r\n      <div class=\"scan-and-forget-div\">\r\n        <!--        <el-link href=\"/scanLogin\" class=\"my-font\" :underline=\"false\">-->\r\n        <!--          扫码登录-->\r\n        <!--        </el-link>-->\r\n        <el-link href=\"/forget\" class=\"my-font\" :underline=\"false\">\r\n          忘记密码?\r\n        </el-link>\r\n      </div>\r\n\r\n      <el-form-item>\r\n        <el-button @click=\"postLogin\" class=\"login-form-button\" type=\"primary\">登 录</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div class=\"login-form-footer\">\r\n      <el-link href=\"/register\" class=\"my-font\" style=\"font-size: 16px\" :underline=\"false\">\r\n        还没有账号？去注册\r\n        <i style=\"font-weight: bolder; font-size: 15px\" class=\"el-icon-right\"></i>\r\n      </el-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {Lock as IconLock, User as IconUser} from \"@element-plus/icons\";\r\nimport {reactive, ref, unref} from \"vue\";\r\nimport {useRouter} from \"vue-router\";\r\nimport {ErrorMessage, SuccessMessage} from \"@/utils/my-message\";\r\nimport userRequest from \"@/api/user\";\r\nimport {debounce} from \"@/utils/debounce-throttle\";\r\n\r\nexport default {\r\n  name: 'LoginView',\r\n  components: {\r\n    IconUser,\r\n    IconLock,\r\n  },\r\n  setup() {\r\n    const router = useRouter()\r\n    let remember = ref(false)\r\n    const loginFormRef = ref('')\r\n\r\n    const loginForm = reactive({\r\n      username: '',\r\n      password: '',\r\n    })\r\n\r\n    const rules = reactive({\r\n      username: [\r\n        {required: true, message: '请输入账号', trigger: 'blur'},\r\n        {min: 4, max: 20, message: '长度在4到20个字符', trigger: 'blur'}\r\n      ],\r\n      password: [\r\n        {required: true, message: '请输入密码', trigger: 'blur'},\r\n        {min: 4, max: 20, message: '长度在4到20个字符', trigger: 'blur'}\r\n      ],\r\n    })\r\n\r\n    const postLogin = debounce(async () => {\r\n      const form = unref(loginFormRef)\r\n      if (!form) {\r\n        return\r\n      }\r\n      try {\r\n        await form.validate()\r\n        userRequest.login(loginForm).then(res => {\r\n          if (res.code === 200) {\r\n            localStorage.setItem(\"token\", res.data.token)\r\n            localStorage.setItem(\"userInfo\", JSON.stringify(res.data.userInfo))\r\n            SuccessMessage(res.msg)\r\n            // 登录成功之后，进行页面跳转\r\n            router.replace(\"/\")\r\n          } else {\r\n            ErrorMessage(res.msg)\r\n          }\r\n        }).catch(err => {\r\n          ErrorMessage(err)\r\n        })\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    })\r\n\r\n    return {\r\n      remember,\r\n      loginFormRef,\r\n      loginForm,\r\n      rules,\r\n      postLogin,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.bg {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  background-size: cover;\r\n}\r\n\r\n.login-form {\r\n  width: 28rem;\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 10rem;\r\n  transform: translate(-50%, 0);\r\n  padding: 2rem;\r\n  margin-top: 1rem;\r\n  letter-spacing: 2px;\r\n}\r\n\r\n.login-form-header {\r\n  height: 20px;\r\n  padding-left: 45px;\r\n  padding-bottom: 100px;\r\n}\r\n\r\n.login-form-text {\r\n  color: #000000;\r\n  font-weight: bold;\r\n  font-size: 1.8rem;\r\n  padding-top: 15px;\r\n}\r\n\r\n.login-form-input {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.login-form-button {\r\n  border-radius: 3px;\r\n  width: 100%;\r\n  font-weight: 600;\r\n  font-size: 15px;\r\n  letter-spacing: 2px;\r\n  height: 3.5rem;\r\n  background: #5a84fd;\r\n  margin-top: 35px;\r\n}\r\n\r\n.login-form-button:hover {\r\n  box-shadow: 0 10px 30px #2156f6;\r\n  transition: 3s;\r\n}\r\n\r\n.scan-and-forget-div {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 10px;\r\n}\r\n\r\n.my-font {\r\n  font-weight: bolder;\r\n  font-size: 14px;\r\n  color: #91949c;\r\n}\r\n\r\n.my-font:hover {\r\n  color: #5a84fd;\r\n}\r\n\r\n.login-form-footer {\r\n  font-weight: bolder;\r\n  color: #91949c;\r\n  padding-top: 1.5rem;\r\n  text-align: center;\r\n}\r\n\r\n/deep/ .el-input__inner {\r\n  height: 3rem;\r\n}\r\n\r\n.el-checkbox {\r\n  color: #91949c;\r\n  font-weight: bolder;\r\n  font-size: 15px;\r\n}\r\n\r\n/deep/ .el-form-item__label {\r\n  color: #91949c;\r\n  font-weight: bold;\r\n}\r\n\r\n/deep/ .el-form-item {\r\n  align-items: baseline;\r\n}\r\n\r\n.bg-change {\r\n  background-color: #e74c3c;\r\n  animation: bg-color 20s infinite;\r\n  -webkit-animation: bg-color 20s infinite;\r\n}\r\n\r\n@-webkit-keyframes bg-color {\r\n  0% {\r\n    background-color: #f18f87;\r\n  }\r\n  20% {\r\n    background-color: #ead18c;\r\n  }\r\n  40% {\r\n    background-color: #8be1d1;\r\n  }\r\n  60% {\r\n    background-color: #8cbee1;\r\n  }\r\n  80% {\r\n    background-color: #cba2e1;\r\n  }\r\n  100% {\r\n    background-color: #f18f87;\r\n  }\r\n}\r\n\r\n@keyframes bg-color {\r\n  0% {\r\n    background-color: #f18f87;\r\n  }\r\n  20% {\r\n    background-color: #ead18c;\r\n  }\r\n  40% {\r\n    background-color: #8be1d1;\r\n  }\r\n  60% {\r\n    background-color: #8cbee1;\r\n  }\r\n  80% {\r\n    background-color: #cba2e1;\r\n  }\r\n  100% {\r\n    background-color: #f18f87;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}