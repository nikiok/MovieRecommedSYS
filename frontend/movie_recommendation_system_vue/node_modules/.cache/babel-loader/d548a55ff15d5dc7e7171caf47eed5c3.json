{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-06888c3d\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"personal-info-master\"\n};\nconst _hoisted_2 = {\n  class: \"name-sex\"\n};\nconst _hoisted_3 = {\n  class: \"nickname\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  key: 2\n};\nconst _hoisted_7 = {\n  class: \"types\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"like\"\n}, \"类型喜好：\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"regions\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"like\"\n}, \"地区喜好：\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  class: \"btn\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\"编辑个人资料\");\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_male = _resolveComponent(\"male\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_female = _resolveComponent(\"female\");\n  const _component_paperclip = _resolveComponent(\"paperclip\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 昵称和性别 \"), _createElementVNode(\"span\", _hoisted_3, _toDisplayString($setup.user.nickname), 1 /* TEXT */), $setup.user.sex === '男' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, [_createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_male, {\n      color: \"#36A4FF\"\n    })]),\n    _: 1 /* STABLE */\n  })])) : $setup.user.sex === '女' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, [_createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_female, {\n      color: \"pink\"\n    })]),\n    _: 1 /* STABLE */\n  })])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, [_createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_paperclip, {\n      color: \"#92ff9d\"\n    })]),\n    _: 1 /* STABLE */\n  })]))]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.types, (type, index) => {\n    return _openBlock(), _createBlock(_component_el_tag, {\n      key: index,\n      class: \"each-type\",\n      type: \"info\",\n      effect: \"dark\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(type), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.regions, (region, index) => {\n    return _openBlock(), _createBlock(_component_el_tag, {\n      key: index,\n      class: \"each-region\",\n      type: \"info\",\n      effect: \"dark\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(region), 1 /* TEXT */)]),\n\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_11, [_createVNode(_component_el_button, {\n    onClick: $setup.handleEditInfo,\n    size: \"small\",\n    icon: \"Edit\"\n  }, {\n    default: _withCtx(() => [_hoisted_12]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])]);\n}","map":{"version":3,"mappings":";;;EACOA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAU;;EAEbA,KAAK,EAAC;AAAU;;;;;;;;;;;EAMnBA,KAAK,EAAC;AAAO;gEAChBC,oBAA+B;EAAzBD,KAAK,EAAC;AAAM,GAAC,OAAK;;EAYrBA,KAAK,EAAC;AAAS;iEAClBC,oBAA+B;EAAzBD,KAAK,EAAC;AAAM,GAAC,OAAK;;EAYrBA,KAAK,EAAC;AAAK;kDAC8C,QAAM;;;;;;;;uBApCtEE,oBAsCM,OAtCNC,UAsCM,GArCJF,oBAMM,OANNG,UAMM,GALJC,8BAAc,EACdJ,oBAAiD,QAAjDK,UAAiD,mBAAvBC,WAAI,CAACC,QAAQ,kBAC3BD,WAAI,CAACE,GAAG,0BAApBP,oBAA+E,qBAAjDQ,aAA0CC;sBAAjC,MAAuB,CAAvBD,aAAuBE;MAAjBC,KAAK,EAAC;IAAS;;UAC3CN,WAAI,CAACE,GAAG,0BAAzBP,oBAAmF,qBAAhDQ,aAAyCC;sBAAhC,MAAsB,CAAtBD,aAAsBI;MAAdD,KAAK,EAAC;IAAM;;yBAChEX,oBAAmE,qBAAtDQ,aAA+CC;sBAAtC,MAA4B,CAA5BD,aAA4BK;MAAjBF,KAAK,EAAC;IAAS;;WAGlDZ,oBAWM,OAXNe,UAWM,GAVJC,UAA+B,qBAC/Bf,oBAQSgB,6BAPmBX,YAAK,GAArBY,IAAI,EAAEC,KAAK;yBADvBC,aAQSC;MANJC,GAAG,EAAEH,KAAK;MACXpB,KAAK,EAAC,WAAW;MACjBmB,IAAI,EAAC,MAAM;MACXK,MAAM,EAAC;;wBAET,MAAU,mCAAPL,IAAI;;;;oCAIXlB,oBAWM,OAXNwB,UAWM,GAVJC,WAA+B,qBAC/BxB,oBAQSgB,6BAPqBX,cAAO,GAAzBoB,MAAM,EAAEP,KAAK;yBADzBC,aAQSC;MANJC,GAAG,EAAEH,KAAK;MACXpB,KAAK,EAAC,aAAa;MACnBmB,IAAI,EAAC,MAAM;MACXK,MAAM,EAAC;;wBAET,MAAY,mCAATG,MAAM;;;;oCAIb1B,oBAEM,OAFN2B,WAEM,GADJlB,aAA8EmB;IAAlEC,OAAK,EAAEvB,qBAAc;IAAEwB,IAAI,EAAC,OAAO;IAACC,IAAI,EAAC;;sBAAO,MAAM","names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","$setup","nickname","sex","_createVNode","_component_el_icon","_component_male","color","_component_female","_component_paperclip","_hoisted_7","_hoisted_8","_Fragment","type","index","_createBlock","_component_el_tag","key","effect","_hoisted_9","_hoisted_10","region","_hoisted_11","_component_el_button","onClick","size","icon"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\components\\personal\\PersonalInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"personal-info-master\">\r\n    <div class=\"name-sex\">\r\n      <!-- 昵称和性别 -->\r\n      <span class=\"nickname\">{{ user.nickname }}</span>\r\n      <span v-if=\"user.sex === '男'\"><el-icon><male color=\"#36A4FF\"/></el-icon></span>\r\n      <span v-else-if=\"user.sex === '女'\"><el-icon><female color=\"pink\"/></el-icon></span>\r\n      <span v-else><el-icon><paperclip color=\"#92ff9d\"/></el-icon></span>\r\n    </div>\r\n\r\n    <div class=\"types\">\r\n      <span class=\"like\">类型喜好：</span>\r\n      <el-tag\r\n          v-for=\"(type, index) in types\"\r\n          :key=\"index\"\r\n          class=\"each-type\"\r\n          type=\"info\"\r\n          effect=\"dark\"\r\n      >\r\n        {{ type }}\r\n      </el-tag>\r\n    </div>\r\n\r\n    <div class=\"regions\">\r\n      <span class=\"like\">地区喜好：</span>\r\n      <el-tag\r\n          v-for=\"(region, index) in regions\"\r\n          :key=\"index\"\r\n          class=\"each-region\"\r\n          type=\"info\"\r\n          effect=\"dark\"\r\n      >\r\n        {{ region }}\r\n      </el-tag>\r\n    </div>\r\n\r\n    <div class=\"btn\">\r\n      <el-button @click=\"handleEditInfo\" size=\"small\" icon=\"Edit\">编辑个人资料</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {reactive, ref} from \"vue\";\r\nimport {Edit} from \"@element-plus/icons\";\r\nimport userRequest from \"@/api/user\";\r\nimport {ErrorMessage} from \"@/utils/my-message\";\r\nimport router from \"@/router\";\r\nimport emitter from \"@/utils/event-bus\";\r\n\r\nexport default {\r\n  name: \"PersonalInfo\",\r\n  components: {Edit},\r\n  setup() {\r\n    let user = reactive({\r\n      id: -1,\r\n      nickname: '',\r\n      sex: '保密',\r\n      avatar: '',\r\n    })\r\n    let types = ref([])\r\n    let regions = ref([])\r\n\r\n    /**\r\n     * 每次初始化界面是判断token是否过期，如果没有过期，则显示登录基本信息\r\n     */\r\n    userRequest.getUserInfo().then(res => {\r\n      if (res.code === 200) {\r\n        // let userInfo = JSON.parse(localStorage.getItem('userInfo'))\r\n        let userInfo = res.data\r\n        user.nickname = userInfo.nickname\r\n        user.id = userInfo.id\r\n        user.avatar = userInfo.avatar\r\n        user.sex = userInfo.sex\r\n\r\n        // 全局事件总线——触发：从服务器获取到个人信息后，将头像路径传递给Avatar.vue\r\n        emitter.emit('handleEditAvatarChange', {\r\n          avatar: user.avatar\r\n        })\r\n\r\n        userRequest.getTypesAndRegions().then(res => {\r\n          types.value = res.data.types\r\n          regions.value = res.data.regions\r\n        }).catch(err => {\r\n          console.error(err)\r\n        })\r\n      } else {\r\n        ErrorMessage(res.msg)\r\n      }\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n\r\n    let handleEditInfo = () => {\r\n      router.push({\r\n        path: \"/personal/edit\"\r\n      })\r\n    }\r\n\r\n    return {\r\n      user,\r\n      types,\r\n      regions,\r\n      handleEditInfo\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.personal-info-master {\r\n  margin-top: 5px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.nickname {\r\n  font-size: 2rem;\r\n  font-weight: 600;\r\n  color: #b2c8ec;\r\n  margin-right: 0.6rem;\r\n}\r\n\r\n.types, .regions, .btn {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.each-type, .each-region {\r\n  margin-left: 1rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.like {\r\n  font-weight: 600;\r\n  color: #73a2e7;\r\n  font-size: 1.1rem;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}