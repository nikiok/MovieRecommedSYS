{"ast":null,"code":"import CommentStrip from \"@/components/basic/CommentStrip\";\nimport commentRequest from \"@/api/comment\";\nimport { ref, watch } from \"vue\";\nimport MovieStrip from \"@/components/basic/MovieStrip\";\nimport SvgIcon from \"@/components/basic/SvgIcon\";\nimport BlankPage from \"@/components/basic/BlankPage\";\nexport default {\n  name: \"MomentsView\",\n  components: {\n    BlankPage,\n    MovieStrip,\n    CommentStrip,\n    SvgIcon\n  },\n  setup() {\n    let loading = ref(true);\n    let moments = ref([]);\n\n    // 分页查询需要用到的一些数据\n    let currentPage = ref(1); // 当前页码\n    let pageSize = ref(10); // 每页电影数量\n    let total = ref(0); // 总电影数\n\n    const getMoreMoments = () => {\n      moments.value = [];\n      loading.value = true;\n      commentRequest.getCommentMovieMoments(currentPage.value, pageSize.value).then(res => {\n        if (res.code === 200) {\n          moments.value = res.data.records;\n          total.value = res.data.total;\n          loading.value = false;\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    };\n    getMoreMoments();\n\n    /**\r\n     * 监听`当前页码`变化\r\n     * 若页码发生变化，重新请求电影数据，随后页面发生变化。\r\n     */\n    watch(currentPage, (newValue, oldValue) => {\n      // 页面回到顶部\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n      // 兼容IE\n      window.scrollTo(0, 0);\n      getMoreMoments();\n    });\n    return {\n      currentPage,\n      pageSize,\n      total,\n      loading,\n      moments\n    };\n  }\n};","map":{"version":3,"mappings":"AA2CA,OAAOA,YAAW,MAAO,iCAAiC;AAC1D,OAAOC,cAAa,MAAO,eAAe;AAC1C,SAAQC,GAAG,EAAEC,KAAK,QAAO,KAAK;AAC9B,OAAOC,UAAS,MAAO,+BAA+B;AACtD,OAAOC,OAAM,MAAO,4BAA4B;AAChD,OAAOC,SAAQ,MAAO,8BAA8B;AAEpD,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,UAAU,EAAE;IAACF,SAAS;IAAEF,UAAU;IAAEJ,YAAY;IAAEK;EAAO,CAAC;EAC1DI,KAAKA,GAAG;IACN,IAAIC,OAAM,GAAIR,GAAG,CAAC,IAAI;IACtB,IAAIS,OAAM,GAAIT,GAAG,CAAC,EAAE;;IAEpB;IACA,IAAIU,WAAU,GAAIV,GAAG,CAAC,CAAC,CAAC,EAAE;IAC1B,IAAIW,QAAO,GAAIX,GAAG,CAAC,EAAE,CAAC,EAAI;IAC1B,IAAIY,KAAI,GAAIZ,GAAG,CAAC,CAAC,CAAC,EAAO;;IAEzB,MAAMa,cAAa,GAAIA,MAAM;MAC3BJ,OAAO,CAACK,KAAI,GAAI,EAAC;MACjBN,OAAO,CAACM,KAAI,GAAI,IAAI;MACpBf,cAAc,CAACgB,sBAAsB,CAACL,WAAW,CAACI,KAAK,EAAEH,QAAQ,CAACG,KAAK,CAAC,CAACE,IAAI,CAACC,GAAE,IAAK;QACnF,IAAIA,GAAG,CAACC,IAAG,KAAM,GAAG,EAAE;UACpBT,OAAO,CAACK,KAAI,GAAIG,GAAG,CAACE,IAAI,CAACC,OAAO;UAChCR,KAAK,CAACE,KAAI,GAAIG,GAAG,CAACE,IAAI,CAACP,KAAK;UAC5BJ,OAAO,CAACM,KAAI,GAAI,KAAK;QACvB;MACF,CAAC,CAAC,CAACO,KAAK,CAACC,GAAE,IAAK;QACdC,OAAO,CAACC,KAAK,CAACF,GAAG;MACnB,CAAC;IACH;IACAT,cAAc,CAAC,CAAC;;IAEhB;;;;IAIAZ,KAAK,CAACS,WAAW,EAAE,CAACe,QAAQ,EAAEC,QAAQ,KAAK;MACzC;MACAC,QAAQ,CAACC,IAAI,CAACC,SAAQ,GAAI,CAAC;MAC3BF,QAAQ,CAACG,eAAe,CAACD,SAAQ,GAAI,CAAC;MACtC;MACAE,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MAErBnB,cAAc,CAAC,CAAC;IAClB,CAAC,CAAC;IAEF,OAAO;MACLH,WAAW;MACXC,QAAQ;MACRC,KAAK;MACLJ,OAAO;MACPC;IACF;EACF;AACF","names":["CommentStrip","commentRequest","ref","watch","MovieStrip","SvgIcon","BlankPage","name","components","setup","loading","moments","currentPage","pageSize","total","getMoreMoments","value","getCommentMovieMoments","then","res","code","data","records","catch","err","console","error","newValue","oldValue","document","body","scrollTop","documentElement","window","scrollTo"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\views\\personal\\info\\MomentsView.vue"],"sourcesContent":["<template>\r\n  <el-skeleton :loading=\"loading\" :rows=\"5\" animated/>\r\n\r\n  <template v-for=\"(moment, index) in moments\" :key=\"index\">\r\n    <comment-strip :comment=\"moment.commentStripVo\">\r\n      <template v-slot:movieInfo>\r\n        <movie-strip :movie=\"moment.movieStripVo\"></movie-strip>\r\n      </template>\r\n    </comment-strip>\r\n    <el-divider/>\r\n  </template>\r\n\r\n  <blank-page v-if=\"!loading && !moments.length\" :page-name=\"'moment'\"></blank-page>\r\n\r\n  <!-- 分页 样式1-->\r\n  <div v-if=\"total > 10\" class=\"pagination-style-first\">\r\n    <el-pagination\r\n        style=\"justify-content: center\"\r\n        v-model:currentPage=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        v-model:total=\"total\"\r\n        pager-count=\"7\"\r\n        background\r\n        layout=\"total, prev, pager, next, jumper\"\r\n    />\r\n  </div>\r\n\r\n  <!-- 分页 样式2 -->\r\n  <div v-if=\"total > 10\" class=\"pagination-style-second\">\r\n    <el-pagination\r\n        style=\"justify-content: center\"\r\n        v-model:currentPage=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        v-model:total=\"total\"\r\n        pager-count=\"5\"\r\n        small\r\n        background\r\n        layout=\"prev, pager, next, jumper\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CommentStrip from \"@/components/basic/CommentStrip\";\r\nimport commentRequest from \"@/api/comment\";\r\nimport {ref, watch} from \"vue\";\r\nimport MovieStrip from \"@/components/basic/MovieStrip\";\r\nimport SvgIcon from \"@/components/basic/SvgIcon\";\r\nimport BlankPage from \"@/components/basic/BlankPage\";\r\n\r\nexport default {\r\n  name: \"MomentsView\",\r\n  components: {BlankPage, MovieStrip, CommentStrip, SvgIcon},\r\n  setup() {\r\n    let loading = ref(true)\r\n    let moments = ref([])\r\n\r\n    // 分页查询需要用到的一些数据\r\n    let currentPage = ref(1); // 当前页码\r\n    let pageSize = ref(10);   // 每页电影数量\r\n    let total = ref(0);      // 总电影数\r\n\r\n    const getMoreMoments = () => {\r\n      moments.value = []\r\n      loading.value = true;\r\n      commentRequest.getCommentMovieMoments(currentPage.value, pageSize.value).then(res => {\r\n        if (res.code === 200) {\r\n          moments.value = res.data.records;\r\n          total.value = res.data.total;\r\n          loading.value = false;\r\n        }\r\n      }).catch(err => {\r\n        console.error(err)\r\n      })\r\n    }\r\n    getMoreMoments();\r\n\r\n    /**\r\n     * 监听`当前页码`变化\r\n     * 若页码发生变化，重新请求电影数据，随后页面发生变化。\r\n     */\r\n    watch(currentPage, (newValue, oldValue) => {\r\n      // 页面回到顶部\r\n      document.body.scrollTop = 0;\r\n      document.documentElement.scrollTop = 0;\r\n      // 兼容IE\r\n      window.scrollTo(0, 0);\r\n\r\n      getMoreMoments();\r\n    });\r\n\r\n    return {\r\n      currentPage,\r\n      pageSize,\r\n      total,\r\n      loading,\r\n      moments\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/* 分页模块样式 */\r\n.pagination-style-first, .pagination-style-second {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.pagination-style-first {\r\n  display: block;\r\n}\r\n\r\n.pagination-style-second {\r\n  display: none;\r\n}\r\n\r\n@media screen and (max-width: 1000px) {\r\n  .pagination-style-first {\r\n    display: none;\r\n  }\r\n\r\n  .pagination-style-second {\r\n    display: block;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}