{"ast":null,"code":"import { nextTick, reactive, ref } from \"vue\";\nimport movieRequest from \"@/api/movie\";\nexport default {\n  name: \"MovieCarousel\",\n  components: {},\n  setup() {\n    let carousel = ref(null);\n    let screenWidth = ref(0);\n    let movies = reactive([]);\n    movieRequest.getHighestRatedMovies().then(res => {\n      if (res.code === 200) {\n        const responseMovies = res.data;\n        for (let i = 0; i < 3; i++) {\n          movies.push({\n            id: responseMovies[i].id,\n            pic: responseMovies[i].pic,\n            label: responseMovies[i].name\n          });\n        }\n        // 将回调延迟到下次 DOM 更新循环之后执行\n        nextTick(() => {\n          // 切换幻灯片至第2张，从0开始\n          carousel.value.setActiveItem(1);\n        });\n      }\n    });\n    return {\n      movies,\n      screenWidth,\n      carousel\n    };\n  }\n};","map":{"version":3,"mappings":"AAyBA,SAAQA,QAAQ,EAAEC,QAAQ,EAAEC,GAAG,QAAO,KAAK;AAC3C,OAAOC,YAAW,MAAO,aAAa;AAEtC,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE,CAAC,CAAC;EACdC,KAAKA,GAAG;IACN,IAAIC,QAAO,GAAIL,GAAG,CAAC,IAAI,CAAC;IACxB,IAAIM,WAAU,GAAIN,GAAG,CAAC,CAAC,CAAC;IACxB,IAAIO,MAAK,GAAIR,QAAQ,CAAC,EAAE,CAAC;IAEzBE,YAAY,CAACO,qBAAqB,CAAC,CAAC,CAACC,IAAI,CAACC,GAAE,IAAK;MAC/C,IAAIA,GAAG,CAACC,IAAG,KAAM,GAAG,EAAE;QACpB,MAAMC,cAAa,GAAIF,GAAG,CAACG,IAAI;QAC/B,KAAK,IAAIC,IAAI,CAAC,EAAEA,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;UAC1BP,MAAM,CAACQ,IAAI,CAAC;YACVC,EAAE,EAAEJ,cAAc,CAACE,CAAC,CAAC,CAACE,EAAE;YACxBC,GAAG,EAAEL,cAAc,CAACE,CAAC,CAAC,CAACG,GAAG;YAC1BC,KAAK,EAAEN,cAAc,CAACE,CAAC,CAAC,CAACZ;UAC3B,CAAC;QACH;QACA;QACAJ,QAAQ,CAAC,MAAM;UACb;UACAO,QAAQ,CAACc,KAAK,CAACC,aAAa,CAAC,CAAC,CAAC;QACjC,CAAC;MACH;IACF,CAAC,CAAC;IAEF,OAAO;MACLb,MAAM;MACND,WAAW;MACXD;IACF;EACF;AACF","names":["nextTick","reactive","ref","movieRequest","name","components","setup","carousel","screenWidth","movies","getHighestRatedMovies","then","res","code","responseMovies","data","i","push","id","pic","label","value","setActiveItem"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\components\\home\\MovieCarousel.vue"],"sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <el-carousel\r\n        ref=\"carousel\"\r\n        class=\"carousel-first\"\r\n        trigger=\"hover\"\r\n        :interval=\"3000\"\r\n        height=\"35rem\"\r\n        type=\"card\"\r\n        arrow=\"always\"\r\n    >\r\n      <el-carousel-item\r\n          :label=\"movie.label\"\r\n          class=\"item\"\r\n          v-for=\"(movie,index) in movies\"\r\n          :key=\"index\">\r\n        <a :href=\"`/movie/info/${movie.id}`\" target=\"_blank\">\r\n          <el-image class=\"img\" :src=\"movie.pic\" alt=\"电影海报\"></el-image>\r\n        </a>\r\n      </el-carousel-item>\r\n    </el-carousel>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {nextTick, reactive, ref} from \"vue\";\r\nimport movieRequest from \"@/api/movie\";\r\n\r\nexport default {\r\n  name: \"MovieCarousel\",\r\n  components: {},\r\n  setup() {\r\n    let carousel = ref(null);\r\n    let screenWidth = ref(0);\r\n    let movies = reactive([]);\r\n\r\n    movieRequest.getHighestRatedMovies().then(res => {\r\n      if (res.code === 200) {\r\n        const responseMovies = res.data;\r\n        for (let i = 0; i < 3; i++) {\r\n          movies.push({\r\n            id: responseMovies[i].id,\r\n            pic: responseMovies[i].pic,\r\n            label: responseMovies[i].name\r\n          })\r\n        }\r\n        // 将回调延迟到下次 DOM 更新循环之后执行\r\n        nextTick(() => {\r\n          // 切换幻灯片至第2张，从0开始\r\n          carousel.value.setActiveItem(1);\r\n        })\r\n      }\r\n    });\r\n\r\n    return {\r\n      movies,\r\n      screenWidth,\r\n      carousel,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n/deep/ .el-carousel__item {\r\n  left: 6%;\r\n}\r\n\r\n/deep/ .el-carousel__button {\r\n  background-color: #545c64;\r\n  border-radius: 5px;\r\n  color: #ffffff;\r\n}\r\n\r\n.main {\r\n  width: 100%;\r\n}\r\n\r\n.item {\r\n  width: 25rem;\r\n  height: 100%;\r\n  margin: 0 auto;\r\n\r\n  .img {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 5px;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 400px) {\r\n  /deep/ .el-carousel__item {\r\n    left: -14%;\r\n  }\r\n}\r\n\r\n/* 响应式布局 - 当屏幕小于 600 像素宽时，用默认走马灯样式展示 */\r\n@media screen and (min-width: 400px) and (max-width: 600px) {\r\n  /deep/ .el-carousel__item {\r\n    left: -9%;\r\n  }\r\n}\r\n\r\n/* 响应式布局 - 当屏幕大于600像素 小于 3000像素 宽时，用card走马灯样式展示 */\r\n@media screen and (min-width: 600px) and (max-width: 3000px) {\r\n  /deep/ .el-carousel__item {\r\n    left: 6%;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}