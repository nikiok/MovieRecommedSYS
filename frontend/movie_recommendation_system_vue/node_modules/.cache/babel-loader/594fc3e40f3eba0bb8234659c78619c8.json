{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, withKeys as _withKeys, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-03589122\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login-form-header\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  style: {\n    \"width\": \"75px\",\n    \"height\": \"75px\",\n    \"float\": \"left\",\n    \"padding-right\": \"40px\"\n  },\n  src: _imports_0,\n  alt: \"logo\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login-form-text\"\n}, \"电影推荐系统 - 登录\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"我已同意\\\"电影推荐系统\\\"用户注册协议!\");\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"注 册\");\nconst _hoisted_6 = {\n  class: \"login-form-footer\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 我有账号 去登录 \");\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  style: {\n    \"font-weight\": \"bolder\",\n    \"font-size\": \"15px\"\n  },\n  class: \"el-icon-right\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_icon_user = _resolveComponent(\"icon-user\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_icon_lock = _resolveComponent(\"icon-lock\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_link = _resolveComponent(\"el-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"  <div class=\\\"bg\\\" style=\\\"background-image: url('https://api.xygeng.cn/Bing/')\\\"></div>\"), _createElementVNode(\"div\", {\n    class: \"login-form my-border\",\n    onKeyup: _cache[4] || (_cache[4] = _withKeys((...args) => $setup.postRegister && $setup.postRegister(...args), [\"enter\"]))\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_router_link, {\n    to: \"/home\"\n  }, {\n    default: _withCtx(() => [_hoisted_2]),\n    _: 1 /* STABLE */\n  }), _hoisted_3]), _createVNode(_component_el_form, {\n    ref: \"registerFormRef\",\n    model: $setup.registerForm,\n    rules: $setup.rules\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"账 号\",\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        class: \"login-form-input\",\n        placeholder: \"账 号\",\n        modelValue: $setup.registerForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.registerForm.username = $event),\n        autofocus: \"\",\n        autocomplete: \"off\"\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"el-input__icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_icon_user)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"密 码\",\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        class: \"login-form-input\",\n        placeholder: \"密 码\",\n        modelValue: $setup.registerForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.registerForm.password = $event),\n        \"show-password\": \"\"\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"el-input__icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_icon_lock)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"确 认\",\n      prop: \"checkPass\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        class: \"login-form-input\",\n        placeholder: \"密 码 确 认\",\n        modelValue: $setup.registerForm.checkPass,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.registerForm.checkPass = $event),\n        \"show-password\": \"\"\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"el-input__icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_icon_lock)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"agree\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_checkbox, {\n        modelValue: $setup.agree,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.agree = $event)\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        onClick: $setup.postRegister,\n        class: \"login-form-button\",\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_link, {\n    href: \"/login\",\n    style: {\n      \"font-weight\": \"bolder\",\n      \"font-size\": \"16px\",\n      \"color\": \"#91949c\"\n    },\n    underline: false\n  }, {\n    default: _withCtx(() => [_hoisted_7, _hoisted_8]),\n    _: 1 /* STABLE */\n  })])], 32 /* HYDRATE_EVENTS */)], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"mappings":";OAMkFA,UAAwB;;;EAFjGC,KAAK,EAAC;AAAmB;gEAE1BC,oBAA+G;EAA1GC,KAAoE,EAApE;IAAA;IAAA;IAAA;IAAA;EAAA,CAAoE;EAACC,GAAwB,EAAxBJ,UAAwB;EAACK,GAAG,EAAC;;gEAGzGH,oBAA8C;EAAzCD,KAAK,EAAC;AAAiB,GAAC,aAAW;iDAmDT,uBAAmB;iDAI0B,KAAG;;EAI5EA,KAAK,EAAC;AAAmB;iDAC0E,YAEpG;gEAAAC,oBAA0E;EAAvEC,KAA4C,EAA5C;IAAA;IAAA;EAAA,CAA4C;EAACF,KAAK,EAAC;;;;;;;;;;;;;;6DAtE5DK,gHAA4F,EAC5FJ,oBAwEM;IAxEDD,KAAK,EAAC,sBAAsB;IAAEM,OAAK,mDAAQC,mDAAY;MAE1DN,oBAMM,OANNO,UAMM,GALJC,aAEcC;IAFDC,EAAE,EAAC;EAAO;sBACrB,MAA+G,CAA/GC,UAA+G;;MAGjHC,UAA8C,IAGhDJ,aAsDUK;IAtDDC,GAAG,EAAC,iBAAiB;IAAEC,KAAK,EAAET,mBAAY;IAAGU,KAAK,EAAEV;;sBAC3D,MAce,CAdfE,aAceS;MAdDC,KAAK,EAAC,KAAK;MAACC,IAAI,EAAC;;wBAC7B,MAYW,CAZXX,aAYWY;QAXPrB,KAAK,EAAC,kBAAkB;QACxBsB,WAAW,EAAC,KAAK;oBACRf,mBAAY,CAACgB,QAAQ;mEAArBhB,mBAAY,CAACgB,QAAQ;QAC9BC,SAAS,EAAT,EAAS;QACTC,YAAY,EAAC;;QAEJC,MAAM,WACf,MAEU,CAFVjB,aAEUkB;UAFD3B,KAAK,EAAC;QAAgB;4BAC7B,MAAY,CAAZS,aAAYmB;;;;;;;QAMpBnB,aAaeS;MAbDC,KAAK,EAAC,KAAK;MAACC,IAAI,EAAC;;wBAC7B,MAWW,CAXXX,aAWWY;QAVPrB,KAAK,EAAC,kBAAkB;QACxBsB,WAAW,EAAC,KAAK;oBACRf,mBAAY,CAACsB,QAAQ;mEAArBtB,mBAAY,CAACsB,QAAQ;QAC9B,eAAa,EAAb;;QAESH,MAAM,WACf,MAEU,CAFVjB,aAEUkB;UAFD3B,KAAK,EAAC;QAAgB;4BAC7B,MAAY,CAAZS,aAAYqB;;;;;;;QAMpBrB,aAaeS;MAbDC,KAAK,EAAC,KAAK;MAACC,IAAI,EAAC;;wBAC7B,MAWW,CAXXX,aAWWY;QAVPrB,KAAK,EAAC,kBAAkB;QACxBsB,WAAW,EAAC,SAAS;oBACZf,mBAAY,CAACwB,SAAS;mEAAtBxB,mBAAY,CAACwB,SAAS;QAC/B,eAAa,EAAb;;QAESL,MAAM,WACf,MAEU,CAFVjB,aAEUkB;UAFD3B,KAAK,EAAC;QAAgB;4BAC7B,MAAY,CAAZS,aAAYqB;;;;;;;QAMpBrB,aAEeS;MAFDE,IAAI,EAAC;IAAO;wBACxB,MAA8D,CAA9DX,aAA8DuB;oBAAxCzB,YAAK;mEAALA,YAAK;;0BAAE,MAAmB;;;;QAGlDE,aAEeS;wBADb,MAAyF,CAAzFT,aAAyFwB;QAA7EC,OAAK,EAAE3B,mBAAY;QAAEP,KAAK,EAAC,mBAAmB;QAACmC,IAAI,EAAC;;0BAAU,MAAG;;;;;;;yCAIjFlC,oBAKM,OALNmC,UAKM,GAJJ3B,aAGU4B;IAHDC,IAAI,EAAC,QAAQ;IAACpC,KAA2D,EAA3D;MAAA;MAAA;MAAA;IAAA,CAA2D;IAAEqC,SAAS,EAAE;;sBAAO,MAEpG,uBAA0E","names":["_imports_0","class","_createElementVNode","style","src","alt","_createCommentVNode","onKeyup","$setup","_hoisted_1","_createVNode","_component_router_link","to","_hoisted_2","_hoisted_3","_component_el_form","ref","model","rules","_component_el_form_item","label","prop","_component_el_input","placeholder","username","autofocus","autocomplete","prefix","_component_el_icon","_component_icon_user","password","_component_icon_lock","checkPass","_component_el_checkbox","_component_el_button","onClick","type","_hoisted_6","_component_el_link","href","underline"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\r\n  <!--  <div class=\"bg\" style=\"background-image: url('https://api.xygeng.cn/Bing/')\"></div>-->\r\n  <div class=\"login-form my-border\" @keyup.enter=\"postRegister\">\r\n\r\n    <div class=\"login-form-header\">\r\n      <router-link to=\"/home\">\r\n        <img style=\"width: 75px; height: 75px; float: left; padding-right: 40px;\" src=\"../assets/logo.png\" alt=\"logo\"/>\r\n      </router-link>\r\n\r\n      <div class=\"login-form-text\">电影推荐系统 - 登录</div>\r\n    </div>\r\n\r\n    <el-form ref=\"registerFormRef\" :model=\"registerForm\" :rules=\"rules\">\r\n      <el-form-item label=\"账 号\" prop=\"username\">\r\n        <el-input\r\n            class=\"login-form-input\"\r\n            placeholder=\"账 号\"\r\n            v-model=\"registerForm.username\"\r\n            autofocus\r\n            autocomplete=\"off\"\r\n        >\r\n          <template #prefix>\r\n            <el-icon class=\"el-input__icon\">\r\n              <icon-user/>\r\n            </el-icon>\r\n          </template>\r\n        </el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"密 码\" prop=\"password\">\r\n        <el-input\r\n            class=\"login-form-input\"\r\n            placeholder=\"密 码\"\r\n            v-model=\"registerForm.password\"\r\n            show-password\r\n        >\r\n          <template #prefix>\r\n            <el-icon class=\"el-input__icon\">\r\n              <icon-lock/>\r\n            </el-icon>\r\n          </template>\r\n        </el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"确 认\" prop=\"checkPass\">\r\n        <el-input\r\n            class=\"login-form-input\"\r\n            placeholder=\"密 码 确 认\"\r\n            v-model=\"registerForm.checkPass\"\r\n            show-password\r\n        >\r\n          <template #prefix>\r\n            <el-icon class=\"el-input__icon\">\r\n              <icon-lock/>\r\n            </el-icon>\r\n          </template>\r\n        </el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"agree\">\r\n        <el-checkbox v-model=\"agree\">我已同意\"电影推荐系统\"用户注册协议!</el-checkbox>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button @click=\"postRegister\" class=\"login-form-button\" type=\"primary\">注 册</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div class=\"login-form-footer\">\r\n      <el-link href=\"/login\" style=\"font-weight: bolder;font-size: 16px;color: #91949c;\" :underline=\"false\">\r\n        我有账号 去登录\r\n        <i style=\"font-weight: bolder; font-size: 15px\" class=\"el-icon-right\"></i>\r\n      </el-link>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {Lock as IconLock, User as IconUser} from \"@element-plus/icons\";\r\nimport {reactive, ref, unref} from \"vue\";\r\nimport {useRouter} from \"vue-router\";\r\nimport {ErrorMessage, SuccessMessage} from \"@/utils/my-message\";\r\nimport userRequest from \"@/api/user\";\r\nimport {debounce} from \"@/utils/debounce-throttle\";\r\n\r\nexport default {\r\n  name: 'RegisterView',\r\n  components: {\r\n    IconUser,\r\n    IconLock,\r\n  },\r\n  setup() {\r\n    let router = useRouter()\r\n    let agree = ref(false)\r\n    const registerFormRef = ref('')\r\n\r\n    const registerForm = reactive({\r\n      username: '',\r\n      password: '',\r\n      checkPass: '',\r\n    })\r\n\r\n    const validateUser = (rule, value, callback) => {\r\n      const reg = /^[a-zA-Z0-9]+$/\r\n      if (value === '') {\r\n        callback(new Error('请输入账号'))\r\n      } else if (value.length < 4 || value.length > 20) {\r\n        callback(new Error('长度在4到20个字符'))\r\n      } else if (!reg.test(value)) {\r\n        callback(new Error('只允许填写数字、字母'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const validateUserChange = (rule, value, callback) => {\r\n      const reg = /^[a-zA-Z0-9]+$/\r\n      if (!reg.test(value)) {\r\n        callback(new Error('只允许填写数字、字母'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const validatePassBlur = (rule, value, callback) => {\r\n      const reg = /^[a-zA-Z0-9_!.@]+$/\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'))\r\n      } else if (value.length < 4 || value.length > 20) {\r\n        callback(new Error('长度在4到20个字符'))\r\n      } else if (!reg.test(value)) {\r\n        callback(new Error('只允许填写数字、字母、符号(_、!、.、@)'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const validatePassChange = (rule, value, callback) => {\r\n      const reg = /^[a-zA-Z0-9_!.@]+$/\r\n      if (!reg.test(value)) {\r\n        callback(new Error('只允许填写数字、字母、符号(_、!、.、@)'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const validatePassAgainBlur = (rule, value, callback) => {\r\n      const reg = /^[a-zA-Z0-9_!.@]+$/\r\n      if (value === '') {\r\n        callback(new Error('请再次输入密码'))\r\n      } else if (value.length < 4 || value.length > 20) {\r\n        callback(new Error('长度在4到20个字符'))\r\n      } else if (!reg.test(value)) {\r\n        callback(new Error('只允许填写数字、字母、符号(_、!、.、@)'))\r\n      } else if (value !== registerForm.password) {\r\n        callback(new Error(\"两次密码输入不一致\"))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const validateAgreeBlur = (rule, value, callback) => {\r\n      if (!agree.value) {\r\n        callback(new Error('您需要同意《注册协议》才能注册'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const rules = reactive({\r\n      username: [\r\n        {required: true, validator: validateUser, trigger: 'blur'},\r\n        {validator: validateUserChange, trigger: 'change'}\r\n      ],\r\n      password: [\r\n        {required: true, validator: validatePassBlur, trigger: 'blur'},\r\n        {validator: validatePassChange, trigger: 'change'}\r\n      ],\r\n      checkPass: [\r\n        {required: true, validator: validatePassAgainBlur, trigger: 'blur'},\r\n        {validator: validatePassChange, trigger: 'change'}\r\n      ],\r\n      agree: [\r\n        {required: true, validator: validateAgreeBlur, trigger: 'blur'}\r\n      ]\r\n    })\r\n\r\n    const postRegister = debounce(async () => {\r\n      const form = unref(registerFormRef)\r\n      if (!form) {\r\n        return\r\n      }\r\n      try {\r\n        await form.validate()\r\n        userRequest.register(registerForm).then(res => {\r\n          if (res.code === 200) {\r\n            SuccessMessage(res.msg)\r\n            // 注册成功之后，进行页面跳转\r\n            router.replace(\"/login\")\r\n          } else {\r\n            ErrorMessage(res.msg)\r\n          }\r\n        }).catch(err => {\r\n          ErrorMessage(err)\r\n        })\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    })\r\n\r\n    return {\r\n      agree,\r\n      registerFormRef,\r\n      registerForm,\r\n      rules,\r\n      postRegister,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.bg {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  background-size: cover;\r\n}\r\n\r\n.login-form {\r\n  width: 28rem;\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 10rem;\r\n  transform: translate(-50%, 0);\r\n  padding: 2rem;\r\n  margin-top: 1rem;\r\n  letter-spacing: 2px;\r\n}\r\n\r\n.login-form-header {\r\n  height: 20px;\r\n  padding-left: 45px;\r\n  padding-bottom: 100px;\r\n}\r\n\r\n.login-form-text {\r\n  color: #000000;\r\n  font-weight: bold;\r\n  font-size: 1.8rem;\r\n  padding-top: 15px;\r\n}\r\n\r\n.login-form-input {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.login-form-button {\r\n  border-radius: 3px;\r\n  width: 100%;\r\n  font-weight: 600;\r\n  font-size: 15px;\r\n  letter-spacing: 2px;\r\n  height: 3.5rem;\r\n  background: #5a84fd;\r\n  margin-top: 35px;\r\n}\r\n\r\n.login-form-button:hover {\r\n  box-shadow: 0 10px 30px #2156f6;\r\n  transition: 3s;\r\n}\r\n\r\n.login-form-footer {\r\n  font-weight: bolder;\r\n  color: #91949c;\r\n  padding-top: 1.5rem;\r\n  text-align: center;\r\n}\r\n\r\n>>> .el-input__inner {\r\n  height: 3rem;\r\n}\r\n\r\n.el-checkbox {\r\n  color: #91949c;\r\n  font-weight: bolder;\r\n  font-size: 15px;\r\n}\r\n\r\n/deep/ .el-form-item__label {\r\n  color: #91949c;\r\n  font-weight: bold;\r\n}\r\n\r\n/deep/ .el-form-item {\r\n  align-items: baseline;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}