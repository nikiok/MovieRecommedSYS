{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderSlot as _renderSlot, createBlock as _createBlock, Transition as _Transition, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../../assets/default_avatar.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-75ec4d6a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"comment-strip-master\"\n};\nconst _hoisted_2 = {\n  class: \"comment-header\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"default_avatar\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"right\"\n};\nconst _hoisted_5 = {\n  class: \"name\"\n};\nconst _hoisted_6 = {\n  class: \"score-and-time\"\n};\nconst _hoisted_7 = {\n  class: \"comment-middle\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"comment-content\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  style: {\n    \"color\": \"#a89e9e\"\n  }\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"comment-bottom\"\n};\nconst _hoisted_11 = {\n  class: \"agree\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_el_rate = _resolveComponent(\"el-rate\");\n  const _component_svg_icon = _resolveComponent(\"svg-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_avatar, {\n    src: $props.comment.avatar,\n    onError: $event => true\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" 当图片加载错误时，将加载这里面的图片 \"), _hoisted_3]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, _toDisplayString($props.comment.nickname), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", null, [_createVNode(_component_el_rate, {\n    modelValue: $setup.score,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.score = $event),\n    disabled: \"\"\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"span\", null, _toDisplayString($props.comment.time), 1 /* TEXT */)])])]), _createElementVNode(\"div\", _hoisted_7, [$props.comment.comment ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, _toDisplayString($props.comment.comment), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"p\", _hoisted_9, \"该用户很懒，啥也没写。\")), _renderSlot(_ctx.$slots, \"movieInfo\", {}, undefined, true)]), !$props.isOwn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createCommentVNode(\" out-in 当前元素先进行过渡，完成之后新元素过渡进入。 \"), _createVNode(_Transition, {\n    name: \"fade\",\n    mode: \"out-in\",\n    \"enter-active-class\": \"animate__animated animate__fadeIn\",\n    \"leave-active-class\": \"animate__animated animate__fadeOut\",\n    duration: 150\n  }, {\n    default: _withCtx(() => [!$setup.status ? (_openBlock(), _createBlock(_component_svg_icon, {\n      key: 0,\n      onClick: $setup.handleLike,\n      \"icon-class\": \"no_like_1\",\n      style: {\n        \"width\": \"1rem\",\n        \"height\": \"1rem\"\n      }\n    }, null, 8 /* PROPS */, [\"onClick\"])) : (_openBlock(), _createBlock(_component_svg_icon, {\n      key: 1,\n      onClick: $setup.handleLike,\n      \"icon-class\": \"liked_1\",\n      style: {\n        \"width\": \"1rem\",\n        \"height\": \"1rem\"\n      }\n    }, null, 8 /* PROPS */, [\"onClick\"]))]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"span\", _hoisted_11, _toDisplayString($props.comment.agree), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":";OAKaA,UAAqC;;;EAJ3CC,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAgB;gEAGvBC,oBAAiE;EAA5DC,GAAqC,EAArCH,UAAqC;EAACI,GAAG,EAAC;;;EAG5CH,KAAK,EAAC;AAAO;;EACXA,KAAK,EAAC;AAAM;;EACZA,KAAK,EAAC;AAAgB;;EAS1BA,KAAK,EAAC;AAAgB;;;EACCA,KAAK,EAAC;;;;EACtBI,KAAsB,EAAtB;IAAA;EAAA;;;;EAIOJ,KAAK,EAAC;;;EAWjBA,KAAK,EAAC;AAAO;;;;;uBAnCvBK,oBAqCM,OArCNC,UAqCM,GApCJL,oBAeM,OAfNM,UAeM,GAdJC,aAGYC;IAHAP,GAAG,EAAEQ,cAAO,CAACC,MAAM;IAAGC,OAAK,YAAE;;sBACvC,MAA2B,CAA3BC,2CAA2B,EAC3BC,UAAiE;;8BAGnEb,oBAQM,OARNc,UAQM,GAPJd,oBAA8C,OAA9Ce,UAA8C,mBAAzBN,cAAO,CAACO,QAAQ,kBACrChB,oBAKM,OALNiB,UAKM,GAJJjB,oBAEO,eADLO,aAAmCW;gBAAjBC,YAAK;+DAALA,YAAK;IAAEC,QAAQ,EAAR;6CAE3BpB,oBAA+B,+BAAtBS,cAAO,CAACY,IAAI,wBAK3BrB,oBAIM,OAJNsB,UAIM,GAHKb,cAAO,CAACc,OAAO,kBAAxBnB,oBAA2E,KAA3EoB,UAA2E,mBAAtBf,cAAO,CAACc,OAAO,mCACpEnB,oBAAgD,KAAhDqB,UAAgD,EAAf,aAAW,IAC5CC,YAA8BC,mDAGpBlB,YAAK,kBAAjBL,oBAYM,OAZNwB,WAYM,GAXJhB,sDAAsC,EACtCL,aAQasB;IAPTC,IAAI,EAAC,MAAM;IAACC,IAAI,EAAC,QAAQ;IACzB,oBAAkB,EAAC,mCAAmC;IACtD,oBAAkB,EAAC,oCAAoC;IACtDC,QAAQ,EAAE;;sBACb,MACwD,EADvCb,aAAM,kBAAvBc,aACwDC;;MAD9BC,OAAK,EAAEhB,iBAAU;MAAE,YAAU,EAAC,WAAW;MACzDhB,KAAkC,EAAlC;QAAA;QAAA;MAAA;2DACV8B,aAAwGC;;MAAtFC,OAAK,EAAEhB,iBAAU;MAAE,YAAU,EAAC,SAAS;MAAChB,KAAkC,EAAlC;QAAA;QAAA;MAAA;;;MAE5DH,oBAA8C,QAA9CoC,WAA8C,mBAAvB3B,cAAO,CAAC4B,KAAK","names":["_imports_0","class","_createElementVNode","src","alt","style","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_el_avatar","$props","avatar","onError","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_5","nickname","_hoisted_6","_component_el_rate","$setup","disabled","time","_hoisted_7","comment","_hoisted_8","_hoisted_9","_renderSlot","_ctx","_hoisted_10","_Transition","name","mode","duration","_createBlock","_component_svg_icon","onClick","_hoisted_11","agree"],"sourceRoot":"","sources":["F:\\personalSpace\\lx-bishe\\movie_recommendation_system_vue\\src\\components\\basic\\CommentStrip.vue"],"sourcesContent":["<template>\r\n  <div class=\"comment-strip-master\">\r\n    <div class=\"comment-header\">\r\n      <el-avatar :src=\"comment.avatar\" @error=\"true\">\r\n        <!-- 当图片加载错误时，将加载这里面的图片 -->\r\n        <img src=\"../../assets/default_avatar.png\" alt=\"default_avatar\"/>\r\n      </el-avatar>\r\n\r\n      <div class=\"right\">\r\n        <div class=\"name\">{{ comment.nickname }}</div>\r\n        <div class=\"score-and-time\">\r\n          <span>\r\n            <el-rate v-model=\"score\" disabled/>\r\n          </span>\r\n          <span>{{ comment.time }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"comment-middle\">\r\n      <p v-if=\"comment.comment\" class=\"comment-content\">{{ comment.comment }}</p>\r\n      <p v-else style=\"color: #a89e9e\">该用户很懒，啥也没写。</p>\r\n      <slot name=\"movieInfo\"></slot>\r\n    </div>\r\n\r\n    <div v-if=\"!isOwn\" class=\"comment-bottom\">\r\n      <!-- out-in 当前元素先进行过渡，完成之后新元素过渡进入。 -->\r\n      <transition\r\n          name=\"fade\" mode=\"out-in\"\r\n          enter-active-class=\"animate__animated animate__fadeIn\"\r\n          leave-active-class=\"animate__animated animate__fadeOut\"\r\n          :duration=\"150\">\r\n        <svg-icon v-if=\"!status\" @click=\"handleLike\" icon-class=\"no_like_1\"\r\n                  style=\"width: 1rem; height: 1rem;\"></svg-icon>\r\n        <svg-icon v-else @click=\"handleLike\" icon-class=\"liked_1\" style=\"width: 1rem; height: 1rem;\"></svg-icon>\r\n      </transition>\r\n      <span class=\"agree\">{{ comment.agree }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {computed, ref, watch} from \"vue\";\r\nimport commentRequest from \"@/api/comment\";\r\nimport {throttle} from \"@/utils/debounce-throttle\";\r\n\r\nexport default {\r\n  name: \"CommentStrip\",\r\n  props: {\r\n    comment: {\r\n      type: Object,\r\n      default: {\r\n        id: '',\r\n        avatar: '',\r\n        nickname: '',\r\n        score: 0,\r\n        time: '',\r\n        comment: '',\r\n        agree: 0,\r\n        status: 0,\r\n      }\r\n    },\r\n    isOwn: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  setup(props) {\r\n    const cid = props.comment.id;\r\n    // 点赞状态\r\n    let status = ref(props.comment.status);\r\n    let score = computed(() => {\r\n      return props.comment.score / 2;\r\n    })\r\n\r\n    const handleLike = throttle(() => {\r\n      status.value = !status.value;\r\n      if (status.value) props.comment.agree++;\r\n      else props.comment.agree--;\r\n      const t = status.value === true ? 1 : 0;\r\n      commentRequest.likeComment(cid, t).catch(err => {\r\n        console.error(err);\r\n      });\r\n    }, 500)\r\n\r\n    return {\r\n      status,\r\n      score,\r\n      handleLike,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.comment-header {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  .right {\r\n    margin-left: 1rem;\r\n\r\n    .name {\r\n      font-size: 1.2rem;\r\n    }\r\n\r\n    .score-and-time {\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 0.8rem;\r\n      color: #91949c;\r\n    }\r\n  }\r\n}\r\n\r\n.comment-middle {\r\n  margin-left: 2rem;\r\n\r\n  .comment-content {\r\n    // 参考链接：https://blog.csdn.net/iceking66/article/details/78253186\r\n    // 保留空白符序列，但是正常地进行换行。\r\n    white-space: pre-wrap;\r\n  }\r\n}\r\n\r\n.comment-bottom {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  .agree {\r\n    margin-left: 0.3rem;\r\n    font-size: 0.8rem;\r\n    color: #91949c;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}